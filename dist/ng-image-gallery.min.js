!function(){"use strict";var e={enter:13,esc:27,left:37,right:39};angular.module("thatisuday.ng-image-gallery",["ngAnimate"]).directive("ngImageGallery",["$timeout","$document","$q",function(i,n,a){return{replace:!0,transclude:!1,restrict:"AE",scope:{images:"=",methods:"=?",thumbnails:"=?",inline:"=?",bubbles:"=?",imgBubbles:"=?",bgClose:"=?",onOpen:"&?",onClose:"&?"},template:'<div class="ng-image-gallery" ng-class="{inline:inline}"><div ng-if="thumbnails && !inline" class="ng-image-gallery-thumbnails"><div class="thumb" ng-repeat="image in images" ng-click="methods.open($index);" style="background-image:url({{image.thumbUrl || image.url}});"></div></div><div class="ng-image-gallery-modal" ng-show="opened" ng-cloak><div class="ng-image-gallery-backdrop" ng-if="!inline"></div><div class="ng-image-gallery-content" ng-show="!imgLoading" ng-click="backgroundClose($event);"><div class="destroy-icons-container"><a class="ext-url" ng-repeat="image in images" ng-if="activeImg == image && image.extUrl" href="{{image.extUrl}}"></a><div class="close" ng-click="methods.close();" ng-if="!inline"></div></div><div class="prev" ng-click="methods.prev();" ng-class="{\'bubbles-on\':bubbles}" ng-hide="images.length == 1"></div><div class="next" ng-click="methods.next();" ng-class="{\'bubbles-on\':bubbles}" ng-hide="images.length == 1"></div><div class="galleria"><div class="galleria-images"><img class="galleria-image" ng-repeat="image in images" ng-if="activeImg == image" ng-src="{{image.url}}" ondragstart="return false;" oncontextmenu="return false;"/></div><div class="galleria-bubbles" ng-if="bubbles && !imgBubbles"  ng-hide="images.length == 1"><span class="galleria-bubble" ng-click="setActiveImg(image);" ng-repeat="image in images" ng-class="{active : (activeImg == image)}"></span></div><div class="galleria-bubbles" ng-if="bubbles && imgBubbles" ng-hide="images.length == 1"><span class="galleria-bubble img-bubble" ng-click="setActiveImg(image);" ng-repeat="image in images" ng-class="{active : (activeImg == image)}" style="background-image:url({{image.bubbleUrl || image.thumbUrl || image.url}});"></span></div></div></div><div class="ng-image-gallery-loader" ng-show="imgLoading"><div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div></div></div>',link:function(s,l,g){s.showLoader=function(){s.imgLoading=!0},s.hideLoader=function(){s.imgLoading=!1},s.loadImg=function(e){var i=a.defer();e.hasOwnProperty("cached")||s.showLoader();var n=new Image;return n.src=e.url,n.onload=function(){return e.hasOwnProperty("cached")||s.hideLoader(),e.hasOwnProperty("cached")||(e.cached=!0),i.resolve(e)},i.promise},s.setActiveImg=function(e){s.loadImg(e).then(function(e){s.activeImg=e})},s.images=void 0!=s.images?s.images:[],s.methods=void 0!=s.methods?s.methods:{},s.thumbnails=void 0==s.thumbnails||s.thumbnails,s.inline=void 0!=s.inline&&s.inline,s.bubbles=void 0==s.bubbles||s.bubbles,s.imgBubbles=void 0!=s.imgBubbles&&s.imgBubbles,s.bgClose=void 0!=s.bgClose&&s.bgClose,s.onOpen=void 0!=s.onOpen?s.onOpen:angular.noop,s.onClose=void 0!=s.onClose?s.onClose:angular.noop;var t=!0;s.$watch("images",function(){t?t=!1:s.images.length&&s.setActiveImg(s.images[s.activeImageIndex||0])});var o=!0;if(s.$watch("activeImageIndex",function(e){o?o=!1:s.images.length&&s.setActiveImg(s.images[e])}),s.$watch("inline",function(){i(function(){s.inline&&s.methods.open()})}),s.methods.open=function(e){s.activeImageIndex=e?e:0,s.opened=!0,i(function(){s.onOpen()},300)},s.methods.close=function(){s.opened=!1,i(function(){s.onClose(),s.activeImageIndex=0},300)},s.methods.next=function(){s.activeImageIndex==s.images.length-1?s.activeImageIndex=0:s.activeImageIndex=s.activeImageIndex+1},s.methods.prev=function(){0==s.activeImageIndex?s.activeImageIndex=s.images.length-1:s.activeImageIndex--},s.backgroundClose=function(e){if(s.bgClose&&!s.inline)for(var i=["galleria-image","destroy-icons-container","ext-url","close","next","prev","galleria-bubble"],n=0;n<e.target.classList.length&&i.indexOf(e.target.classList[n])==-1;n++)s.methods.close()},n.bind("keyup",function(n){s.inline||(n.which==e.right||n.which==e.enter?i(function(){s.methods.next()}):n.which==e.left?i(function(){s.methods.prev()}):n.which==e.esc&&i(function(){s.methods.close()}))}),window.Hammer){var c=new Hammer(l[0]);c.on("swiperight",function(e){i(function(){s.methods.prev()})}),c.on("swipeleft",function(e){i(function(){s.methods.next()})}),c.on("doubletap",function(e){s.inline||i(function(){s.methods.close()})})}}}}])}();
//# sourceMappingURL=ng-image-gallery.min.js.map
