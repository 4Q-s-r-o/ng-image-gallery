{"version":3,"sources":["main.min.js"],"names":["keys","enter","esc","left","right","angular","module","directive","$timeout","$document","$q","replace","transclude","restrict","scope","images","methods","thumbnails","onOpen","onClose","template","link","elem","attr","showLoader","imgLoading","hideLoader","loadImg","imgObj","deferred","defer","cached","img","Image","src","url","onload","resolve","promise","setActiveImg","then","activeImg","openFromThumb","opened","noop","imagesFirstWatch","activeImageIndexFirstWatch","$watch","length","activeImageIndex","newImgIndex","open","close","next","prev","bind","event","which"],"mappings":"CAAC,WACA,YAGA,IAAIA,IACHC,MAAQ,GACRC,IAAQ,GACRC,KAAQ,GACRC,MAAQ,GAGTC,SACCC,OAAO,+BAAgC,cACvCC,UAAU,kBAAmB,WAAY,YAAa,KAAM,SAASC,EAAUC,EAAWC,GAC1F,OACCC,SAAU,EACVC,YAAa,EACbC,SAAW,KACXC,OACCC,OAAS,IACTC,QAAU,KACVC,WAAa,KACbC,OAAS,KACTC,QAAU,MAEXC,SAAY,glCA8BZC,KAAO,SAASP,EAAOQ,EAAMC,GAO5BT,EAAMU,WAAa,WAClBV,EAAMW,YAAa,GAIpBX,EAAMY,WAAa,WAClBZ,EAAMW,YAAa,GAIpBX,EAAMa,QAAU,SAASC,GACxB,GAAIC,GAAYnB,EAAGoB,OAGfF,GAAOG,QAAQjB,EAAMU,YAGzB,IAAIQ,GAAM,GAAIC,MAYd,OAXAD,GAAIE,IAAMN,EAAOO,IACjBH,EAAII,OAAS,WAOZ,MALIR,GAAOG,QAAQjB,EAAMY,aAGrBE,EAAOG,SAAQH,EAAOG,QAAS,GAE5BF,EAASQ,QAAQT,IAGlBC,EAASS,SAGjBxB,EAAMyB,aAAe,SAASX,GAE7Bd,EAAMa,QAAQC,GAAQY,KAAK,SAASZ,GACnCd,EAAM2B,UAAYb,KAKpBd,EAAM4B,cAAgB,SAASd,GAC9Bd,EAAM6B,QAAS,EACf7B,EAAMyB,aAAaX,IAUpBd,EAAMC,OAAUD,EAAY,OAAIA,EAAMC,UACtCD,EAAME,QAAWF,EAAa,QAAIA,EAAME,WACxCF,EAAMI,OAAUJ,EAAY,OAAIA,EAAMI,OAASb,QAAQuC,KACvD9B,EAAMK,QAAWL,EAAa,QAAIA,EAAMK,QAAUd,QAAQuC,IAG1D,IAAIC,IAAmB,EACnBC,GAA6B,CAEjChC,GAAMiC,OAAO,SAAU,WACnBF,EACFA,GAAmB,EAEZ/B,EAAMC,OAAOiC,QAAQlC,EAAMyB,aAClCzB,EAAMC,OAAOD,EAAMmC,qBAIrBnC,EAAMiC,OAAO,mBAAoB,SAASG,GACtCJ,EACFA,GAA6B,EAEtBhC,EAAMC,OAAOiC,QAAQlC,EAAMyB,aAClCzB,EAAMC,OAAOmC,MAWfpC,EAAME,QAAQmC,KAAO,WACpBrC,EAAMmC,iBAAmB,EACzBnC,EAAM6B,QAAS,EAGfnC,EAAS,WACRM,EAAMI,UACJ,MAKJJ,EAAME,QAAQoC,MAAQ,WACrBtC,EAAM6B,QAAS,EAGfnC,EAAS,WACRM,EAAMK,UACNL,EAAMmC,iBAAmB,GACvB,MAIJnC,EAAME,QAAQqC,KAAO,WACjBvC,EAAMmC,kBAAqBnC,EAAMC,OAAOiC,OAAS,EACnDlC,EAAMmC,iBAAmB,EAGzBnC,EAAMmC,iBAAmBnC,EAAMmC,iBAAmB,GAKpDnC,EAAME,QAAQsC,KAAO,WACS,GAA1BxC,EAAMmC,iBACRnC,EAAMmC,iBAAmBnC,EAAMC,OAAOiC,OAAS,EAG/ClC,EAAMmC,oBASRxC,EAAU8C,KAAK,QAAS,SAASC,GAC7BA,EAAMC,OAASzD,EAAKI,OAASoD,EAAMC,OAASzD,EAAKC,MACnDO,EAAS,WACRM,EAAME,QAAQqC,SAGRG,EAAMC,OAASzD,EAAKG,KAC3BK,EAAS,WACRM,EAAME,QAAQsC,SAGRE,EAAMC,OAASzD,EAAKE,KAC3BM,EAAS,WACRM,EAAME,QAAQoC","file":"main.min.js","sourcesContent":[" (function(){\r\n\t'use strict';\r\n\t\r\n\t// Key codes\r\n\tvar keys = {\r\n\t\tenter : 13,\r\n\t\tesc   : 27,\r\n\t\tleft  : 37,\r\n\t\tright : 39\r\n\t};\r\n\r\n\tangular\r\n\t.module('thatisuday.ng-image-gallery', ['ngAnimate'])\r\n\t.directive('ngImageGallery', ['$timeout', '$document', '$q', function($timeout, $document, $q){\r\n\t\treturn {\r\n\t\t\treplace : true,\r\n\t\t\ttransclude : false,\r\n\t\t\trestrict : 'AE',\r\n\t\t\tscope : {\r\n\t\t\t\timages : '=',\r\n\t\t\t\tmethods : '=?',\r\n\t\t\t\tthumbnails : '@?',\r\n\t\t\t\tonOpen : '&?',\r\n\t\t\t\tonClose : '&?'\r\n\t\t\t},\r\n\t\t\ttemplate : \t'<div class=\"ng-image-gallery\">'+\r\n\t\t\t\t\t\t\t'<div ng-if=\"thumbnails\" class=\"ng-image-gallery-thumbnails\">'+\r\n\t\t\t\t\t\t\t\t'<div class=\"thumb\" ng-repeat=\"image in images\" ng-click=\"openFromThumb(image);\" style=\"background-image:url({{image.thumbUrl || image.url}});\"></div>'+\r\n\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-modal\" ng-show=\"opened\" ng-cloak>' +\r\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-backdrop\"></div>'+\r\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-content\" ng-show=\"!imgLoading\">'+\r\n\t\t\t\t\t\t\t\t\t'<div class=\"close\" ng-click=\"methods.close();\"></div>'+\r\n\t\t\t\t\t\t\t\t\t'<div class=\"prev\" ng-click=\"methods.prev();\"></div>'+\r\n\t\t\t\t\t\t\t\t\t'<div class=\"next\" ng-click=\"methods.next();\"></div>'+\r\n\t\t\t\t\t\t\t\t\t'<div class=\"galleria\">'+\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-images\">'+\r\n\t\t\t\t\t\t\t\t\t\t\t'<img ng-repeat=\"image in images\" ng-if=\"activeImg == image\" ng-src=\"{{image.url}}\" />'+\r\n\t\t\t\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-bubbles\">'+\r\n\t\t\t\t\t\t\t\t\t\t\t'<span ng-click=\"setActiveImg(image);\" ng-repeat=\"image in images\" ng-class=\"{active : (activeImg == image)}\"></span>'+\r\n\t\t\t\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-loader\" ng-show=\"imgLoading\">'+\r\n\t\t\t\t\t\t\t\t\t'<div class=\"spinner\">'+\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect1\"></div>'+\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect2\"></div>'+\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect3\"></div>'+\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect4\"></div>'+\r\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect5\"></div>'+\r\n\t\t\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t\t'</div>'+\r\n\t\t\t\t\t\t'</div>',\r\n\t\t\tlink : function(scope, elem, attr){\r\n\t\t\t\t\r\n\t\t\t\t/*\r\n\t\t\t\t *\tOperational functions\r\n\t\t\t\t**/\r\n\r\n\t\t\t\t// Show gallery loader\r\n\t\t\t\tscope.showLoader = function(){\r\n\t\t\t\t\tscope.imgLoading = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Hide gallery loader\r\n\t\t\t\tscope.hideLoader = function(){\r\n\t\t\t\t\tscope.imgLoading = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Image load complete promise\r\n\t\t\t\tscope.loadImg = function(imgObj){\r\n\t\t\t\t\tvar deferred =  $q.defer();\r\n\r\n\t\t\t\t\t// Show loder\r\n\t\t\t\t\tif(!imgObj.cached) scope.showLoader();\r\n\r\n\t\t\t\t\t// Process image\r\n\t\t\t\t\tvar img = new Image();\r\n\t\t\t\t\timg.src = imgObj.url;\r\n\t\t\t\t\timg.onload = function(){\r\n\t\t\t\t\t\t// Hide loder\r\n\t\t\t\t\t\tif(!imgObj.cached) scope.hideLoader();\r\n\r\n\t\t\t\t\t\t// Cache image\r\n\t\t\t\t\t\tif(!imgObj.cached) imgObj.cached = true;\r\n\r\n\t\t\t\t\t\treturn deferred.resolve(imgObj);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn deferred.promise;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.setActiveImg = function(imgObj){\r\n\t\t\t\t\t// Load image\r\n\t\t\t\t\tscope.loadImg(imgObj).then(function(imgObj){\r\n\t\t\t\t\t\tscope.activeImg = imgObj;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Open gallery from thumbnail\r\n\t\t\t\tscope.openFromThumb = function(imgObj){\r\n\t\t\t\t\tscope.opened = true;\r\n\t\t\t\t\tscope.setActiveImg(imgObj);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/***************************************************/\r\n\t\t\t\t\r\n\t\t\t\t/*\r\n\t\t\t\t *\tGallery settings\r\n\t\t\t\t**/\r\n\r\n\t\t\t\t// Modify scope models\r\n\t\t\t\tscope.images = (scope.images) ? scope.images : [];\r\n\t\t\t\tscope.methods = (scope.methods) ? scope.methods : {};\r\n\t\t\t\tscope.onOpen = (scope.onOpen) ? scope.onOpen : angular.noop;\r\n\t\t\t\tscope.onClose = (scope.onClose) ? scope.onClose : angular.noop;\r\n\r\n\t\t\t\t// Watches\r\n\t\t\t\tvar imagesFirstWatch = true;\r\n\t\t\t\tvar activeImageIndexFirstWatch = true;\r\n\r\n\t\t\t\tscope.$watch('images', function(){\r\n\t\t\t\t\tif(imagesFirstWatch){\r\n\t\t\t\t\t\timagesFirstWatch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(scope.images.length) scope.setActiveImg(\r\n\t\t\t\t\t\tscope.images[scope.activeImageIndex]\r\n\t\t\t\t\t);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tscope.$watch('activeImageIndex', function(newImgIndex){\r\n\t\t\t\t\tif(activeImageIndexFirstWatch){\r\n\t\t\t\t\t\tactiveImageIndexFirstWatch = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(scope.images.length) scope.setActiveImg(\r\n\t\t\t\t\t\tscope.images[newImgIndex]\r\n\t\t\t\t\t);\r\n\t\t\t\t})\r\n\t\t\t\t\r\n\t\t\t\t/***************************************************/\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t *\tMethods\r\n\t\t\t\t**/\r\n\r\n\t\t\t\t// Open modal\r\n\t\t\t\tscope.methods.open = function(){\r\n\t\t\t\t\tscope.activeImageIndex = 0; // Start from first image\r\n\t\t\t\t\tscope.opened = true; // Model opened\r\n\r\n\t\t\t\t\t // call open event after transition\r\n\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\tscope.onOpen();\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t\t// Close modal\r\n\t\t\t\tscope.methods.close = function(){\r\n\t\t\t\t\tscope.opened = false; // Model closed\r\n\r\n\t\t\t\t\t// call close event after transition\r\n\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\tscope.onClose();\r\n\t\t\t\t\t\tscope.activeImageIndex = 0; // Reset index\r\n\t\t\t\t\t}, 300);\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Change image to next\r\n\t\t\t\tscope.methods.next = function(){\r\n\t\t\t\t\tif(scope.activeImageIndex == (scope.images.length - 1)){\r\n\t\t\t\t\t\tscope.activeImageIndex = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tscope.activeImageIndex = scope.activeImageIndex + 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Change image to prev\r\n\t\t\t\tscope.methods.prev = function(){\r\n\t\t\t\t\tif(scope.activeImageIndex == 0){\r\n\t\t\t\t\t\tscope.activeImageIndex = scope.images.length - 1;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse{\r\n\t\t\t\t\t\tscope.activeImageIndex--;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t/***************************************************/\r\n\r\n\t\t\t\t/*\r\n\t\t\t\t *\tUser interactions\r\n\t\t\t\t**/\r\n\t\t\t\t$document.bind('keyup', function(event){\r\n\t\t\t\t\tif(event.which == keys.right || event.which == keys.enter){\r\n\t\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\t\tscope.methods.next();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(event.which == keys.left){\r\n\t\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\t\tscope.methods.prev();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(event.which == keys.esc){\r\n\t\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\t\tscope.methods.close();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\t\t\t}\r\n\t\t}\r\n\t}]);\r\n })();"],"sourceRoot":"/source/"}