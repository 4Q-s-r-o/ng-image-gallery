{"version":3,"sources":["main.min.js"],"names":["closest","el","classname","parentNode","className","classnames","split","includes","keys","enter","esc","left","right","angular","module","provider","defOps","closable","compactClose","fullscreen","closeIcon","width","height","padding","borderRadius","top","backdrop","background","zIndex","animation","animDropIn","animDropOut","animBodyIn","animBodyOut","animDuration","prevIcon","nextIcon","thumbs","thumbsLength","animImage","setOptions","newOps","extend","$get","directive","$timeout","$q","$document","$window","$sce","ngModalOps","restrict","transclude","template","replace","scope","video","options","controls","callbacks","gallery","onOpen","onClose","compile","tElem","tAttr","append","iElem","iAttr","defer","$modal","mBody","querySelector","$mBody","element","mClose","$mClose","getDim","windowWidth","window","innerWidth","windowHeight","innerHeight","mBodyWidth","offsetWidth","mBodyHeight","offsetHeight","mBodyResize","dim","css","margin-left","margin-top","mCloseSetPos","loadImage","index","reject","states","imgLoading","imageAnimted","cached","resolve","promise","image","Image","src","imgURL","onload","imageLoaded","showImage","currImgIndex","then","currentImg","thumbScroll","length","initOps","$$phase","$root","$apply","prevImage","onPrevDone","onPrev","nextImage","onNextDone","onNext","isTouched","isOpened","isClosed","$watchCollection","newStates","cursor","bind","event","target","contains","close","addClass","animDurationSec","-webkit-animation-duration","animation-duration","background-color","z-index","border-radius","min-height","color","flat","videoURL","trustAsResourceUrl","open","find","removeClass","document","getElementsByClassName","getStates","which","position"],"mappings":"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","file":"main.min.js","sourcesContent":["/**!\r\n * AngularJS modal directive\r\n * @author Uday Hiwarale <uhiwarale@gmail.com>\r\n * https://www.github.com/thatisuday/ngModal\r\n */\r\n \r\n \r\n (function(){\r\n\t'use strict';\r\n\t\r\n\tvar keys = {\r\n\t\tenter : 13,\r\n\t\tesc   : 27,\r\n\t\tleft  : 37,\r\n\t\tright : 39\r\n\t};\r\n\t\r\n\t//jQuery .closest like\r\n\tfunction closest(el, classname) {\r\n\t\tif(el.parentNode){\r\n\t\t\tif(el.parentNode.className){\r\n\t\t\t\tvar classnames = el.parentNode.className.split(' ');\r\n\t\t\t\tif(classnames.includes(classname)){\r\n\t\t\t\t\treturn true;\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\treturn closest(el.parentNode, classname);\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\treturn closest(el.parentNode, classname);\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\treturn false;\r\n\t\t}\r\n\t};\r\n\t\r\n\tangular.module('thatisuday.modal', []).provider('ngModalOps', function(){\r\n\t\t/*\r\n\t\t *\tAdd default options here\r\n\t\t**/\r\n\t\tvar defOps = {\r\n\t\t\tclosable : true,\r\n\t\t\tcompactClose : true,\r\n\t\t\tfullscreen : false,\r\n\t\t\tcloseIcon : '_cross_icon',\r\n\t\t\t\r\n\t\t\twidth : '700px',\r\n\t\t\theight : '400px',\r\n\t\t\tpadding:'20px 30px',\r\n\t\t\tborderRadius:'3px',\r\n\t\t\ttop:'50%',\r\n\t\t\tleft:'50%',\r\n\t\t\tbackdrop : 'rgba(0,0,0,0.75)',\r\n\t\t\tbackground : '#fff',\r\n\t\t\tzIndex:'9999',\r\n\t\t\t\r\n\t\t\tanimation : true,\r\n\t\t\tanimDropIn : 'fadeIn',\r\n\t\t\tanimDropOut : 'fadeOut',\r\n\t\t\tanimBodyIn : 'zoomIn',\r\n\t\t\tanimBodyOut : 'fadeOut',\r\n\t\t\tanimDuration : 300,\r\n\t\t\t\r\n\t\t\tprevIcon : '_prev_icon',\r\n\t\t\tnextIcon : '_next_icon',\r\n\t\t\tthumbs : true,\r\n\t\t\tthumbsLength : 5,\r\n\t\t\tanimImage : 'fadeIn'\r\n\t\t};\r\n\t\t\r\n\t\treturn {\r\n\t\t\tsetOptions : function(newOps){\r\n\t\t\t\tangular.extend(defOps, newOps);\r\n\t\t\t},\r\n\t\t\t$get : function(){\r\n\t\t\t\treturn defOps;\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\t.directive('ngModal', ['$timeout', '$q', '$document', '$window', '$sce', 'ngModalOps', function($timeout, $q, $document, $window, $sce, ngModalOps){\r\n\t\treturn {\r\n\t\t\trestrict : 'AE',\r\n\t\t\ttransclude : true,\r\n\t\t\ttemplate : '\\\r\n\t\t\t\t<div class=\"ngModal animated\" ng-class=\"{_active:states.isOpened, _hidden:states.isClosed}\">\\\r\n\t\t\t\t\t<div class=\"_close\" ng-click=\"controls.close();\"></div>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t',\r\n\t\t\treplace : true,\r\n\t\t\tscope : {\r\n\t\t\t\tvideo : '@?',\r\n\t\t\t\toptions : '=?',\r\n\t\t\t\tcontrols : '=?',\r\n\t\t\t\tcallbacks : '=?',\r\n\t\t\t\tgallery : '=?',\r\n\t\t\t\tonOpen : \"&?\",\r\n\t\t\t\tonClose : \"&?\"\r\n\t\t\t},\r\n\t\t\tcompile : function(tElem, tAttr){\r\n\t\t\t\tif(tAttr.gallery){\r\n\t\t\t\t\ttElem.append('\\\r\n\t\t\t\t\t\t<div class=\"_body _gallery animated\">\\\r\n\t\t\t\t\t\t\t<img ng-if=\"imageLoaded\" ng-src=\"{{currentImg}}\" class=\"animated\" ng-class=\"{\\'{{initOps.animImage}}\\':imageAnimted, _hidden:!imageAnimted}\" />\\\r\n\t\t\t\t\t\t\t<div ng-if=\"!imageLoaded\" class=\"_spinner\"></div>\\\r\n\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t<div ng-if=\"initOps.thumbs\" class=\"_thumbnails_conatainer\" style=\"width:{{initOps.thumbsLength*40}}px;\">\\\r\n\t\t\t\t\t\t\t<div class=\"_thumbnails\" style=\"margin-left:{{thumbScroll}}px;\">\\\r\n\t\t\t\t\t\t\t\t<div ng-repeat=\"img in gallery\" ng-class=\"{current:($index == currImgIndex)}\" ng-click=\"showImage($index);\" style=\"background-image:url({{img.thumbURL || img.imgURL}});\"></div>\\\r\n\t\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t</div>\\\r\n\t\t\t\t\t\t<div class=\"_prev {{initOps.prevIcon}}\" ng-click=\"prevImage();\"></div>\\\r\n\t\t\t\t\t\t<div class=\"_next {{initOps.nextIcon}}\" ng-click=\"nextImage();\"></div>\\\r\n\t\t\t\t\t');\r\n\t\t\t\t}\r\n\t\t\t\telse if(tAttr.video){\r\n\t\t\t\t\ttElem.append('<div class=\"_body _video animated\"><iframe ng-src=\"{{videoURL}}\"></iframe></div>');\r\n\t\t\t\t}\r\n\t\t\t\telse{\r\n\t\t\t\t\ttElem.append('<div class=\"_body animated\" ng-transclude></div>');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn function(scope, iElem, iAttr){\r\n\t\t\t\t\t\r\n\t\t\t\t\t//Basic functions\r\n\t\t\t\t\tvar \r\n\t\t\t\t\t\t$modal = iElem,\r\n\t\t\t\t\t\tmodal = $modal[0],\r\n\t\t\t\t\t\tmBody = $modal[0].querySelector('._body'),\r\n\t\t\t\t\t\t$mBody = angular.element(mBody),\r\n\t\t\t\t\t\tmClose = $modal[0].querySelector('._close'),\r\n\t\t\t\t\t\t$mClose = angular.element(mClose),\r\n\t\t\t\t\t\tgetDim = function(){\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\twindowWidth : window.innerWidth,\r\n\t\t\t\t\t\t\t\twindowHeight : window.innerHeight,\r\n\t\t\t\t\t\t\t\tmBodyWidth : mBody.offsetWidth,\r\n\t\t\t\t\t\t\t\tmBodyHeight : mBody.offsetHeight\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmBodyResize = function(){ // Adjust modal body position\r\n\t\t\t\t\t\t\tvar dim = getDim();\r\n\t\t\t\t\t\t\tif(dim.mBodyWidth < dim.windowWidth || dim.mBodyHeight < dim.windowHeight){\r\n\t\t\t\t\t\t\t\t$mBody.css({\r\n\t\t\t\t\t\t\t\t\t'left' : '50%',\r\n\t\t\t\t\t\t\t\t\t'margin-left' : '-' + (dim.mBodyWidth/2) + 'px',\r\n\t\t\t\t\t\t\t\t\t'top' : '50%',\r\n\t\t\t\t\t\t\t\t\t'margin-top' : '-' + (dim.mBodyHeight/2) + 'px'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t$mBody.css({\r\n\t\t\t\t\t\t\t\t\t'left' : '0',\r\n\t\t\t\t\t\t\t\t\t'margin-left' : '0',\r\n\t\t\t\t\t\t\t\t\t'top' : '0',\r\n\t\t\t\t\t\t\t\t\t'margin-top' : '0'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tmCloseSetPos = function(){ // Adjust close icon position\r\n\t\t\t\t\t\t\tvar dim = getDim();\r\n\t\t\t\t\t\t\tif(dim.mBodyWidth < dim.windowWidth || dim.mBodyHeight < dim.windowWidth){\r\n\t\t\t\t\t\t\t\t$mClose.css({\r\n\t\t\t\t\t\t\t\t\t'right' : ((dim.windowWidth - dim.mBodyWidth) / 2 - 25) + 'px',\r\n\t\t\t\t\t\t\t\t\t'top' : ((dim.windowHeight - dim.mBodyHeight) / 2 - 30) + 'px'\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t;\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t//Gallery functions\r\n\t\t\t\t\tvar defer;\r\n\t\t\t\t\tscope.loadImage = function(index){\r\n\t\t\t\t\t\tif(defer) defer.reject();\r\n\t\t\t\t\t\tdefer = $q.defer();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tscope.states.imgLoading = true; //Add a modal state\r\n\t\t\t\t\t\tscope.imageAnimted = false; //For image load animation\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//Prevent loading of cached images\r\n\t\t\t\t\t\tif(scope.gallery[index].cached && scope.gallery[index].cached === true){\r\n\t\t\t\t\t\t\tdefer.resolve(index);\r\n\t\t\t\t\t\t\treturn defer.promise;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tvar image = new Image();\r\n\t\t\t\t\t\timage.src = scope.gallery[index].imgURL;\r\n\t\t\t\t\t\timage.onload = function(){\r\n\t\t\t\t\t\t\tscope.gallery[index].cached = true;\r\n\t\t\t\t\t\t\tdefer.resolve(index); //Resolve loadImage promise\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tscope.imageLoaded = false;\r\n\t\t\t\t\t\treturn defer.promise;\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\tscope.showImage = function(index){ //Show gallery image\r\n\t\t\t\t\t\tvar defer = $q.defer();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tscope.currImgIndex = index || 0;\r\n\t\t\t\t\t\tscope.loadImage(scope.currImgIndex).then(function(index){\r\n\t\t\t\t\t\t\tscope.currentImg = scope.gallery[index].imgURL;\r\n\t\t\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\t\t\tdefer.resolve(); //Resolve showImage promise\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tscope.states.imgLoading = false; //Add a modal state\r\n\t\t\t\t\t\t\t\tscope.imageLoaded = true;\r\n\t\t\t\t\t\t\t\t$timeout(function(){ scope.imageAnimted = true; }, 10);\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t//Scroll thumbnails\r\n\t\t\t\t\t\t\t\tscope.thumbScroll = scope.thumbScroll || 0;\r\n\t\t\t\t\t\t\t\tif(scope.gallery.length > scope.initOps.thumbsLength){\r\n\t\t\t\t\t\t\t\t\tif((scope.currImgIndex + 2) > scope.initOps.thumbsLength){\r\n\t\t\t\t\t\t\t\t\t\tif((scope.currImgIndex + 1) == scope.gallery.length){\r\n\t\t\t\t\t\t\t\t\t\t\tscope.thumbScroll = -40 * ((scope.currImgIndex + 1) - scope.initOps.thumbsLength);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\telse{\r\n\t\t\t\t\t\t\t\t\t\t\tscope.thumbScroll = -40 * ((scope.currImgIndex + 2) - scope.initOps.thumbsLength);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse if(scope.currImgIndex < scope.initOps.thumbsLength){\r\n\t\t\t\t\t\t\t\t\t\tscope.thumbScroll = 0;\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tif(!scope.$$phase && !scope.$root.$$phase) scope.$apply();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn defer.promise;\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\tscope.prevImage = function(){\r\n\t\t\t\t\t\tscope.currImgIndex = (scope.currImgIndex == 0) ? scope.gallery.length -1 : scope.currImgIndex - 1;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tscope.showImage(scope.currImgIndex).then(function(){\r\n\t\t\t\t\t\t\t//Callback for previous image load complete\r\n\t\t\t\t\t\t\t$timeout(function(){if(scope.callbacks.onPrevDone) scope.callbacks.onPrevDone();});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//Callback for previous image load initiated\r\n\t\t\t\t\t\t$timeout(function(){if(scope.callbacks.onPrev) scope.callbacks.onPrev();});\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\tscope.nextImage = function(){\r\n\t\t\t\t\t\tscope.currImgIndex = (scope.currImgIndex == scope.gallery.length - 1) ? 0 : scope.currImgIndex + 1;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tscope.showImage(scope.currImgIndex).then(function(){\r\n\t\t\t\t\t\t\t//Callback for next image load complete\r\n\t\t\t\t\t\t\t$timeout(function(){if(scope.callbacks.onNextDone) scope.callbacks.onNextDone();});\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t//Callback for previous image load initiated\r\n\t\t\t\t\t\t$timeout(function(){if(scope.callbacks.onNext) scope.callbacks.onNext();});\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t/////////////////////////////////////////////////////////////////////////////////////////////\r\n\t\t\t\t\t// \t\t\t\tModal states\r\n\t\t\t\t\t/////////////////////////////////////////////////////////////////////////////////////////////\r\n\t\t\t\t\tscope.states = {\r\n\t\t\t\t\t\tisTouched : false,\r\n\t\t\t\t\t\tisOpened : false,\r\n\t\t\t\t\t\tisClosed : true,\r\n\t\t\t\t\t\timgLoading : false\r\n\t\t\t\t\t};\r\n\t\t\t\t\tscope.$watchCollection('states', function(newStates){\r\n\t\t\t\t\t\tscope.states.isClosed = !newStates.isOpened; //Maintain isOpened/isClosed states\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t/////////////////////////////////////////////////////////////////////////////////////////////\r\n\t\t\t\t\t// \t\t\tSet options\r\n\t\t\t\t\t/////////////////////////////////////////////////////////////////////////////////////////////\r\n\t\t\t\t\tscope.initOps = angular.extend({}, ngModalOps, scope.options);\r\n\t\t\t\t\tif(iAttr.gallery && scope.gallery){\r\n\t\t\t\t\t\tscope.initOps.closable = false;\r\n\t\t\t\t\t\tscope.initOps.compactClose = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if(scope.initOps.fullscreen){\r\n\t\t\t\t\t\tscope.initOps.compactClose = false;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t/////////////////////////////////////////////////////////////////////////////////////////////\r\n\t\t\t\t\t// \t\t\tPerform options actions\r\n\t\t\t\t\t/////////////////////////////////////////////////////////////////////////////////////////////\r\n\t\t\t\t\t/* Modal closable on click outside of modal body */\r\n\t\t\t\t\tif(scope.initOps.closable){\r\n\t\t\t\t\t\t$modal.css({'cursor':'pointer'});\r\n\t\t\t\t\t\t$modal.bind('click', function(event){\r\n\t\t\t\t\t\t\tif(event.target != mBody && !mBody.contains(event.target)){\r\n\t\t\t\t\t\t\t\tscope.controls.close();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Set close icon */\r\n\t\t\t\t\tif(scope.initOps.closeIcon) $mClose.addClass(scope.initOps.closeIcon);\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Set animation duration */\r\n\t\t\t\t\tif(scope.initOps.animation && scope.initOps.animDuration){\r\n\t\t\t\t\t\tvar animDurationSec = scope.initOps.animDuration/1000 + 's';\r\n\t\t\t\t\t\t$modal.css({'-webkit-animation-duration':animDurationSec, 'animation-duration':animDurationSec});\r\n\t\t\t\t\t\t$mBody.css({'-webkit-animation-duration':animDurationSec, 'animation-duration':animDurationSec});\r\n\t\t\t\t\t} else{scope.initOps.animDuration = 0;}\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Set basic css style */\r\n\t\t\t\t\t$modal.css({\r\n\t\t\t\t\t\t'background-color' : scope.initOps.backdrop,\r\n\t\t\t\t\t\t'z-index' : scope.initOps.zIndex\r\n\t\t\t\t\t});\r\n\t\t\t\t\t$mBody.css({\r\n\t\t\t\t\t\t'background-color' : scope.initOps.background,\r\n\t\t\t\t\t\t'width' : scope.initOps.width,\r\n\t\t\t\t\t\t'height' : scope.initOps.height,\r\n\t\t\t\t\t\t'padding' : scope.initOps.padding,\r\n\t\t\t\t\t\t'border-radius' : scope.initOps.borderRadius,\r\n\t\t\t\t\t\t'top' : scope.initOps.top,\r\n\t\t\t\t\t\t'left' : scope.initOps.left\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Full screen modal */\r\n\t\t\t\t\tif(scope.initOps.fullscreen){\r\n\t\t\t\t\t\t$mBody.css({\r\n\t\t\t\t\t\t\t'width' : '100%',\r\n\t\t\t\t\t\t\t'min-height' : '100%',\r\n\t\t\t\t\t\t\t'height' : 'auto',\r\n\t\t\t\t\t\t\t'top' : '0',\r\n\t\t\t\t\t\t\t'left' : '0',\r\n\t\t\t\t\t\t\t'border-radius' : '0px'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t$mClose.css({\r\n\t\t\t\t\t\t\t'color' : '#333'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Flat modal */\r\n\t\t\t\t\tif(scope.initOps.flat){\r\n\t\t\t\t\t\t$modal.addClass('_flat _' + scope.initOps.flat);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Modal gallery */\r\n\t\t\t\t\tif(iAttr.gallery && scope.gallery){\r\n\t\t\t\t\t\tvar dim = getDim();\r\n\t\t\t\t\t\t$mBody.css({\r\n\t\t\t\t\t\t\t'background-color' : 'transparent',\r\n\t\t\t\t\t\t\t'width' : 'calc(100% - 100px)',\r\n\t\t\t\t\t\t\t'height' : 'calc(100% - 100px)'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tscope.showImage(); //Show gallery image\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Modal video */\r\n\t\t\t\t\tif(iAttr.video && scope.video){\r\n\t\t\t\t\t\tvar dim = getDim();\r\n\t\t\t\t\t\tscope.videoURL = $sce.trustAsResourceUrl(scope.video);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$mBody.css({\r\n\t\t\t\t\t\t\t'height' : (dim.mBodyWidth / 100) * 56.25 + 'px',\r\n\t\t\t\t\t\t\t'border-radius' : '0px',\r\n\t\t\t\t\t\t\t'padding' : '0px'\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t/////////////////////////////////////////////////////////////////////////////////////////////\r\n\t\t\t\t\t// \t\t\t\tModal control actions\r\n\t\t\t\t\t/////////////////////////////////////////////////////////////////////////////////////////////\r\n\t\t\t\t\tscope.controls = scope.controls || {};\r\n\t\t\t\t\tscope.callbacks = scope.callbacks || {};\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Open modal */\r\n\t\t\t\t\tscope.controls.open = function(){\r\n\t\t\t\t\t\tif(scope.states.isOpened) return;\r\n\t\t\t\t\t\tscope.states.isOpened = true;\r\n\t\t\t\t\t\tscope.states.isTouched = true;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$document.find('body').addClass('ngModalVisible'); //Disable document scroll\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(scope.initOps.animation){ //Animations\r\n\t\t\t\t\t\t\t$modal.removeClass(scope.initOps.animDropOut).addClass(scope.initOps.animDropIn);\r\n\t\t\t\t\t\t\t$mBody.removeClass(scope.initOps.animBodyOut).addClass(scope.initOps.animBodyIn);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$timeout(function(){ //Set modal body position\r\n\t\t\t\t\t\t\tif(!scope.initOps.fullscreen) mBodyResize();\r\n\t\t\t\t\t\t\tif(scope.initOps.compactClose) mCloseSetPos(); /* Compact close button */\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$timeout(function(){ //Event callbacks\r\n\t\t\t\t\t\t\tif(scope.onOpen) scope.onOpen();\r\n\t\t\t\t\t\t\tif(scope.callbacks.onOpen) scope.callbacks.onOpen();\r\n\t\t\t\t\t\t}, scope.initOps.animDuration); //After animation complete\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(!scope.$$phase && !scope.$root.$$phase) scope.$apply();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Close modal */\r\n\t\t\t\t\tscope.controls.close = function(){\r\n\t\t\t\t\t\tif(!scope.states.isOpened) return;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(scope.initOps.animation){ //Animations\r\n\t\t\t\t\t\t\t$modal.removeClass(scope.initOps.animDropIn).addClass(scope.initOps.animDropOut);\r\n\t\t\t\t\t\t\t$mBody.removeClass(scope.initOps.animBodyIn).addClass(scope.initOps.animBodyOut);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\t\tscope.states.isOpened = false;\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//Event callbacks\r\n\t\t\t\t\t\t\tif(scope.onClose) scope.onClose();\r\n\t\t\t\t\t\t\tif(scope.callbacks.onClose) scope.callbacks.onClose();\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\t\t\tif(document.getElementsByClassName('ngModal _active').length === 0){\r\n\t\t\t\t\t\t\t\t\t$document.find('body').removeClass('ngModalVisible'); //Enable document scroll\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}, scope.initOps.animDuration); //After animation complete\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(!scope.$$phase && !scope.$root.$$phase) scope.$apply();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Get modal states */\r\n\t\t\t\t\tscope.controls.getStates = function(){\r\n\t\t\t\t\t\treturn scope.states;\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Gallery next image */\r\n\t\t\t\t\tscope.controls.nextImage = function(){\r\n\t\t\t\t\t\tscope.nextImage();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Gallery previous image */\r\n\t\t\t\t\tscope.controls.prevImage = function(){\r\n\t\t\t\t\t\tscope.prevImage();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Gallery show image */\r\n\t\t\t\t\tscope.controls.showImage = function(index){\r\n\t\t\t\t\t\tif(index < scope.gallery.length) scope.showImage(index);\r\n\t\t\t\t\t\tif(!scope.$$phase && !scope.$root.$$phase) scope.$apply();\r\n\t\t\t\t\t};\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t/////////////////////////////////////////////////////////////////////////////////////////////\r\n\t\t\t\t\t// \t\t\t\tBrowser actions\r\n\t\t\t\t\t/////////////////////////////////////////////////////////////////////////////////////////////\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Window key press */\r\n\t\t\t\t\t$document.bind('keyup', function(event){\r\n\t\t\t\t\t\tif(scope.states.isOpened){\r\n\t\t\t\t\t\t\tif(event.which === keys.esc){\r\n\t\t\t\t\t\t\t\tscope.controls.close();\r\n\t\t\t\t\t\t\t} else if(event.which === keys.left){\r\n\t\t\t\t\t\t\t\tscope.prevImage();\r\n\t\t\t\t\t\t\t} else if(event.which === keys.right){\r\n\t\t\t\t\t\t\t\tscope.nextImage();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Window resize */\r\n\t\t\t\t\tangular.element($window).bind('resize', function(){\r\n\t\t\t\t\t\tif(scope.states.isOpened){\r\n\t\t\t\t\t\t\tif(!scope.initOps.fullscreen) mBodyResize();\r\n\t\t\t\t\t\t\tif(scope.initOps.compactClose) mCloseSetPos(); /* Compact close button */\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t\r\n\t\t\t\t\t/////////////////////////////////////////////////////////////////////////////////////////////\r\n\t\t\t\t\t// \t\t\t\tMisc \r\n\t\t\t\t\t/////////////////////////////////////////////////////////////////////////////////////////////\r\n\t\t\t\t\t\r\n\t\t\t\t\t/* Check for nested modal */\r\n\t\t\t\t\t$timeout(function(){\r\n\t\t\t\t\t\tif(closest($modal[0], 'ngModal')) $modal.css({'position':'absolute'});\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}]);\r\n })();"],"sourceRoot":"/source/"}