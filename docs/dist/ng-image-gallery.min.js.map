{"version":3,"sources":["ng-image-gallery.min.js"],"names":["keys","enter","esc","left","right","angular","module","provider","defOpts","thumbnails","thumbSize","thumbLimit","inline","bubbles","bubbleSize","imgBubbles","bgClose","piracy","imgAnim","textValues","imageLoadErrorMsg","deleteButtonTitle","editButtonTitle","closeButtonTitle","externalLinkButtonTitle","itemClass","flexiAttributes","defaultImage","setOpts","newOpts","extend","$get","filter","$sce","value","type","trustAs","directive","$parse","restrict","scope","link","element","attrs","parent","$parent","attribute","attr","name","bind","event","preventDefault","attributes","image","Image","src","showImageAsync","onload","$apply","asyncKind","css","backgroundImage","empty","onerror","$window","$timeout","pre","autoFitBubbles","scrollerWidth","getBoundingClientRect","width","minMargin","bubbleSpace","rawQuotient","bubblesInView","Math","floor","extraSpace","extraMargin","bubbleMargin","finalBubbleSpace","_bubblesInView","_finalBubbleSpace","_bubbleMargin","_safeApply","noop","$watch","$watchCollection","indexCalc","relativeIndexToBubbleWrapper","_activeImageIndex","outBubbles","images","length","_bubblesContainerMarginLeft","$rootScope","$q","ngImageGalleryOpts","replace","transclude","methods","conf","onOpen","onClose","onDelete","onEdit","template","elem","_showLoader","imgLoading","_hideLoader","_loadImg","imgObj","reject","deferred","defer","hasOwnProperty","img","url","cached","resolve","promise","_setActiveImg","indexOf","_activeImg","_imgMoveDirection","then","imgError","fn","phase","this","$root","$$phase","_deleteImg","_deleteImgCallback","index","console","log","splice","cb","_editImg","close","undefined","imagesFirstWatch","activeImageIndexFirstWatch","newImgIndex","open","imgIndex","opened","document","body","addClass","removeClass","next","prev","backgroundClose","e","noCloseClasses","i","target","classList","which","window","Hammer","hammerElem","on","ev","removeClassFromDocumentBody","$on","ImageUrl","$http","$compile","imageScope","imageElement","initialize","CommonUtils","isDefined","defaultImageClass","cssClass","$observe","imageUrlObserver","find","remove","configObject","method","responseType","errorHandling","all","replaceWithDefaultImage","withCredentials","imageLoad","emptyFunction","defaultImageTemplate","defaultImageElement","style","cssText","after","response","status","blob","data","imageBlobUrl","URL","createObjectURL"],"mappings":"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","file":"ng-image-gallery.min.js","sourcesContent":[" (function(){\n\t'use strict';\n\n\t// Key codes\n\tvar keys = {\n\t\tenter : 13,\n\t\tesc   : 27,\n\t\tleft  : 37,\n\t\tright : 39\n\t};\n\n\tangular\n\t.module('thatisuday.ng-image-gallery', ['ngAnimate'])\n\t.provider('ngImageGalleryOpts', function(){\n\t\tvar defOpts = {\n\t\t\tthumbnails  \t:   true,\n\t\t\tthumbSize\t\t: \t80,\n\t\t\tthumbLimit\t\t: \tfalse,\n\t\t\tinline      \t:   false,\n\t\t\tbubbles     \t:   true,\n\t\t\tbubbleSize\t\t: \t20,\n\t\t\timgBubbles  \t:   false,\n\t\t\tbgClose     \t:   false,\n\t\t\tpiracy \t\t\t: \tfalse,\n\t\t\timgAnim \t\t: \t'fadeup',\n\t\t\ttextValues: {\n\t\t\t    imageLoadErrorMsg       : 'Error when loading the image!',\n\t\t\t    deleteButtonTitle       : 'Delete this image...',\n\t\t\t    editButtonTitle         : 'Edit this image...',\n\t\t\t    closeButtonTitle        : 'Close',\n\t\t\t    externalLinkButtonTitle : 'Open image in new tab...'\n\t\t\t},\n\t\t\titemClass: 'thumb',\n\t\t\tflexiAttributes: {},\n            defaultImage: 'images/no-image.png'\n\t\t};\n\n\t\treturn{\n\t\t\tsetOpts : function(newOpts){\n\t\t\t\tangular.extend(defOpts, newOpts);\n\t\t\t},\n\t\t\t$get : function(){\n\t\t\t\treturn defOpts;\n\t\t\t}\n\t\t}\n\t})\n\t.filter('ngImageGalleryTrust', ['$sce', function($sce) {\n      return function(value, type) {\n        // Defaults to treating trusted value as `html`\n        return $sce.trustAs(type || 'html', value);\n      }\n    }])\n    .directive('ngGalleryFlexiAttributes', ['$parse', function($parse){\n\t    return {\n\t    \trestrict: \"A\",\n\t\t\tscope : false,\n\t\t\tlink : function(scope, element, attrs) {\n\t\t\t\tvar flexiAttributes = element.parent().scope().$parent.flexiAttributes;\n\n\t\t\t\tif (flexiAttributes) {\n\t\t\t\t\tfor (var attribute in flexiAttributes) {\n\t\t\t\t\t\telement.attr(attribute.name, attribute.value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t    };\n\t}])\n    .directive('ngRightClick', ['$parse', function($parse){\n\t    return {\n\t    \trestrict: \"A\",\n\t\t\tscope : false,\n\t\t\tlink : function(scope, element, attrs){\n\t\t\t\telement.bind('contextmenu', function(event){\n\t\t\t\t\tif(scope.piracy == false){\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\treturn scope.piracy;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t    };\n\t}])\n    .directive('ngRightClick', ['$parse', function($parse){\n\t    return {\n\t    \trestrict: \"A\",\n\t\t\tscope : false,\n\t\t\tlink : function(scope, element, attrs){\n\t\t\t\telement.bind('contextmenu', function(event){\n\t\t\t\t\tif(scope.piracy == false){\n\t\t\t\t\t\tevent.preventDefault();\n\t\t\t\t\t\treturn scope.piracy;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t    };\n\t}])\n\t.directive(\"showImageAsync\", [function(){\n\t\treturn {\n\t\t\trestrict: \"A\",\n\t\t\tscope: false,\n\t\t\tlink: function (scope, element, attributes){\n\t\t\t\tvar image = new Image();\n\t\t\t\timage.src = attributes.showImageAsync;\n\t\t\t\timage.onload = function(){\n\t\t\t\t\tscope.$apply(function(){\n\t\t\t\t\t\tif(attributes.asyncKind == 'thumb'){\n\t\t\t\t\t\t\telement.css({ backgroundImage: 'url(\"' + attributes.showImageAsync + '\")' });\n\t\t\t\t\t\t\telement.empty(); // remove loading animation element\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(attributes.asyncKind == 'bubble'){\n\t\t\t\t\t\t\telement.css({ backgroundImage: 'url(\"' + attributes.showImageAsync + '\")' });\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t};\n\t\t\t\timage.onerror = function(){\n\t\t\t\t\telement.empty(); // remove loading animation element\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}])\n\t.directive(\"bubbleAutoFit\", ['$window', '$timeout', function($window, $timeout){\n\t\treturn {\n\t\t\trestrict: \"A\",\n\t\t\tscope: false,\n\t\t\tlink: {\n\t\t\t\tpre : function (scope, element, attributes){\n\t\t\t\t\tvar autoFitBubbles = function(){\n\t\t\t\t\t\tvar scrollerWidth = element[0].getBoundingClientRect().width;\n\t\t\t\t\t\tif(scrollerWidth == 0) return;\n\n\t\t\t\t\t\tvar bubbleSize = scope.bubbleSize;\n\t\t\t\t\t\tvar minMargin = 4 + 4; // left+right\n\t\t\t\t\t\tvar bubbleSpace = (bubbleSize + minMargin);\n\t\t\t\t\t\tvar rawQuotient = scrollerWidth / bubbleSpace;\n\t\t\t\t\t\tvar bubblesInView = Math.floor(rawQuotient);\n\t\t\t\t\t\tvar extraSpace = scrollerWidth - (bubblesInView * bubbleSpace);\n\t\t\t\t\t\tvar extraMargin = extraSpace / bubblesInView;\n\t\t\t\t\t\tvar bubbleMargin = minMargin + extraMargin;\n\t\t\t\t\t\tvar finalBubbleSpace = bubbleMargin + bubbleSize;\n\n\t\t\t\t\t\tscope._bubblesInView = bubblesInView;\n\t\t\t\t\t\tscope._finalBubbleSpace = finalBubbleSpace;\n\t\t\t\t\t\tscope._bubbleMargin = '0 ' + (bubbleMargin/2) + 'px';\n\n\t\t\t\t\t\tscope._safeApply(angular.noop);\n\t\t\t\t\t};\n\n\t\t\t\t\t$timeout(autoFitBubbles);\n\n\t\t\t\t\tangular.element($window).bind('resize', function(){\n\t\t\t\t\t\t$timeout(autoFitBubbles);\n\t\t\t\t\t});\n\t\t\t\t\tscope.$watch('inline', function(){\n\t\t\t\t\t\t$timeout(autoFitBubbles);\n\t\t\t\t\t});\n\t\t\t\t\tscope.$watch('bubbleSize', function(){\n\t\t\t\t\t\t$timeout(autoFitBubbles);\n\t\t\t\t\t});\n\t\t\t\t\tscope.$watchCollection('images', function(){\n\t\t\t\t\t\t$timeout(autoFitBubbles);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}])\n\t.directive(\"bubbleAutoScroll\", ['$window', '$timeout', function($window, $timeout){\n\t\treturn {\n\t\t\trestrict: \"A\",\n\t\t\tscope: false,\n\t\t\tlink: function (scope, element, attributes){\n\n\t\t\t\tvar indexCalc = function(){\n\t\t\t\t\tvar relativeIndexToBubbleWrapper = scope._bubblesInView - (scope._bubblesInView - scope._activeImageIndex);\n\n\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\tif(relativeIndexToBubbleWrapper > scope._bubblesInView - 2){\n\t\t\t\t\t\t\tvar outBubbles = ((scope._activeImageIndex+1) - scope._bubblesInView) + 1;\n\n\t\t\t\t\t\t\tif(scope._activeImageIndex != (scope.images.length - 1)){\n\t\t\t\t\t\t\t\tscope._bubblesContainerMarginLeft = '-' + (scope._finalBubbleSpace * outBubbles) + 'px';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tscope._bubblesContainerMarginLeft = '-' + (scope._finalBubbleSpace * (outBubbles - 1)) + 'px';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tscope._bubblesContainerMarginLeft = '0px';\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tangular.element($window).bind('resize', function(){\n\t\t\t\t\t$timeout(indexCalc);\n\t\t\t\t});\n\t\t\t\tscope.$watch('_bubblesInView', function(){\n\t\t\t\t\t$timeout(indexCalc);\n\t\t\t\t});\n\t\t\t\tscope.$watch('_activeImageIndex', function(){\n\t\t\t\t\t$timeout(indexCalc);\n\t\t\t\t});\n\t\t\t\tscope.$watchCollection('images', function(){\n\t\t\t\t\t$timeout(indexCalc);\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\t}])\n\t.directive('ngImageGallery', ['$rootScope', '$timeout', '$q', 'ngImageGalleryOpts',\n\tfunction($rootScope, $timeout, $q, ngImageGalleryOpts){\n\t\treturn {\n\t\t\treplace : true,\n\t\t\ttransclude : false,\n\t\t\trestrict : 'AE',\n\t\t\tscope : {\n\t\t\t\timages \t\t\t: \t'=',\t\t// []\n\t\t\t\tmethods \t\t: \t'=?',\t\t// {}\n\t\t\t\tconf \t\t\t: \t'=?',\t\t// {}\n\n\t\t\t\tthumbnails \t\t: \t'=?',\t\t// true|false\n\t\t\t\tthumbSize\t\t: \t'=?', \t\t// px\n\t\t\t\tthumbLimit\t\t: \t'=?', \t\t// px\n\t\t\t\tinline \t\t\t: \t'=?',\t\t// true|false\n\t\t\t\tbubbles \t\t: \t'=?',\t\t// true|false\n\t\t\t\tbubbleSize \t\t: \t'=?',\t\t// px\n\t\t\t\timgBubbles \t\t: \t'=?',\t\t// true|false\n\t\t\t\tbgClose \t\t: \t'=?',\t\t// true|false\n\t\t\t\tpiracy\t\t\t: \t'=?',\t\t// true|false\n\t\t\t\timgAnim \t\t: \t'@?',\t\t// {name}\n\t\t\t\ttextValues      :   '=?',\t\t// {}\n\t\t\t\tdefaultImage    :   '=?',\t\t// {}\n\n\t\t\t\tonOpen \t\t\t: \t'&?',\t\t// function\n\t\t\t\tonClose \t\t: \t'&?',\t\t// function,\n\t\t\t\tonDelete        :   '&?',\n\t\t\t\tonEdit          :   '&?',\n\n\t\t\t\titemClass\t\t:   '@?',\n\t\t\t\tflexiAttributes\t\t:   '=?'\n\t\t\t},\n\t\t\ttemplate : \t'<div class=\"ng-image-gallery img-move-dir-{{_imgMoveDirection}}\" ng-class=\"{inline:inline}\" ng-hide=\"images.length == 0\">'+\n\n\t\t\t\t\t\t\t// Thumbnails container\n\t\t\t\t\t\t\t//  Hide for inline gallery\n\t\t\t\t\t\t\t'<div ng-if=\"thumbnails && !inline\" class=\"ng-image-gallery-thumbnails\">' +\n \t\t\t\t\t\t\t\t'<div class=\"{{ itemClass }}\" ng-gallery-flexi-attributes ng-repeat=\"image in images track by image.id\" ng-if=\"thumbLimit ? $index < thumbLimit : true\" ng-click=\"methods.open($index);\" show-image-async=\"{{image.thumbUrl || image.url}}\" title=\"{{image.title}}\" async-kind=\"thumb\" ng-style=\"{\\'width\\' : thumbSize+\\'px\\', \\'height\\' : thumbSize+\\'px\\'}\">'+\n \t\t\t\t\t\t\t\t\t'<div class=\"loader\"></div>'+\n \t\t\t\t\t\t\t\t'</div>' +\n \t\t\t\t\t\t\t'</div>' +\n\n\t\t\t\t\t\t\t// Modal container\n\t\t\t\t\t\t\t// (inline container for inline modal)\n\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-modal\" ng-if=\"opened\" ng-cloak>' +\n\n\t\t\t\t\t\t\t\t// Gallery backdrop container\n\t\t\t\t\t\t\t\t// (hide for inline gallery)\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-backdrop\" ng-if=\"!inline\"></div>'+\n\n\t\t\t\t\t\t\t\t// Gallery contents container\n\t\t\t\t\t\t\t\t// (hide when image is loading)\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-content\" ng-show=\"!imgLoading\" ng-click=\"backgroundClose($event);\">'+\n\n\t\t\t\t\t\t\t\t\t// actions icons container\n\t\t\t\t\t\t\t\t\t'<div class=\"actions-icons-container\">'+\n\t\t\t\t\t\t\t\t\t\t// Delete image icon\n\t\t\t\t\t\t\t\t\t\t'<div class=\"delete-img\" ng-repeat=\"image in images track by image.id\" ng-if=\"_activeImg == image && image.deletable\" title=\"{{textValues.deleteButtonTitle}}\" ng-click=\"_deleteImg(image)\"></div>' +\n\n                                        // Edit image icon\n\t\t\t\t\t\t\t\t\t\t'<div class=\"edit-img\" ng-repeat=\"image in images track by image.id\" ng-if=\"_activeImg == image && image.editable\" title=\"{{textValues.editButtonTitle}}\" ng-click=\"_editImg(image)\"></div>' +\n\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t// control icons container\n\t\t\t\t\t\t\t\t\t'<div class=\"control-icons-container\">'+\n\t\t\t\t\t\t\t\t\t\t// External link icon\n\t\t\t\t\t\t\t\t\t\t'<a class=\"ext-url\" ng-repeat=\"image in images track by image.id\" ng-if=\"_activeImg == image && image.extUrl\" href=\"{{image.extUrl}}\" target=\"_blank\" title=\"{{textValues.externalLinkButtonTitle}}\"></a>' +\n\n\t\t\t\t\t\t\t\t\t\t// Close Icon (hidden in inline gallery)\n\t\t\t\t\t\t\t\t\t\t'<div class=\"close\" ng-click=\"methods.close();\" ng-if=\"!inline\"  title=\"{{textValues.closeButtonTitle}}\"></div>' +\n\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t// Prev-Next Icons\n\t\t\t\t\t\t\t\t\t// Add `bubbles-on` class when bubbles are enabled (for offset)\n\t\t\t\t\t\t\t\t\t'<div class=\"prev\" ng-click=\"methods.prev();\" ng-class=\"{\\'bubbles-on\\':bubbles}\" ng-hide=\"images.length == 1\"></div>'+\n\t\t\t\t\t\t\t\t\t'<div class=\"next\" ng-click=\"methods.next();\" ng-class=\"{\\'bubbles-on\\':bubbles}\" ng-hide=\"images.length == 1\"></div>'+\n\n\t\t\t\t\t\t\t\t\t// Galleria container\n\t\t\t\t\t\t\t\t\t'<div class=\"galleria\">'+\n\n\t\t\t\t\t\t\t\t\t\t// Images container\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-images img-anim-{{imgAnim}} img-move-dir-{{_imgMoveDirection}}\">'+\n\t\t\t\t\t\t\t\t\t\t\t'<img class=\"galleria-image\" ng-right-click ng-repeat=\"image in images' +\n\t\t\t\t' track by image.id\" ng-if=\"_activeImg == image\" data-image-url=\"{{image.url}}\"' +\n\t\t\t\t' data-default-image=\"{{defaultImage}}\"' +\n\t\t\t\t' ondragstart=\"return false;\" ng-attr-alt=\"{{image.alt || undefined}}\"/>'+\n\t\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t\t// Image description container\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-title-description-wrapper\">'+\n\t\t\t\t\t\t\t\t\t\t\t'<div ng-repeat=\"image in images track by image.id\" ng-if=\"(image.title || image.desc) && (_activeImg == image)\">'+\n\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"title\" ng-if=\"image.title\" ng-bind-html=\"image.title | ngImageGalleryTrust\"></div>'+\n\t\t\t\t\t\t\t\t\t\t\t\t'<div class=\"desc\" ng-if=\"image.desc\" ng-bind-html=\"image.desc | ngImageGalleryTrust\"></div>'+\n\t\t\t\t\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t\t// Bubble navigation container\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-bubbles-wrapper\" ng-if=\"bubbles && !imgBubbles\" ng-hide=\"images.length == 1\" ng-style=\"{\\'height\\' : bubbleSize+\\'px\\'}\" bubble-auto-fit>'+\n\t\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-bubbles\" bubble-auto-scroll ng-style=\"{\\'margin-left\\': _bubblesContainerMarginLeft}\">'+\n\t\t\t\t\t\t\t\t\t\t\t\t'<span class=\"galleria-bubble\" ng-click=\"_setActiveImg(image);\" ng-repeat=\"image in images track by image.id\" ng-class=\"{active : (_activeImg == image)}\" ng-style=\"{\\'width\\' : bubbleSize+\\'px\\', \\'height\\' : bubbleSize+\\'px\\', margin: _bubbleMargin}\"></span>'+\n\t\t\t\t\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t\t// Image bubble navigation container\n\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-bubbles-wrapper\" ng-if=\"bubbles && imgBubbles\" ng-hide=\"images.length == 1\" ng-style=\"{\\'height\\' : bubbleSize+\\'px\\'}\" bubble-auto-fit>'+\n\t\t\t\t\t\t\t\t\t\t\t'<div class=\"galleria-bubbles\" bubble-auto-scroll ng-style=\"{\\'margin-left\\': _bubblesContainerMarginLeft}\">'+\n\t\t\t\t\t\t\t\t\t\t\t\t'<span class=\"galleria-bubble img-bubble\" ng-click=\"_setActiveImg(image);\" ng-repeat=\"image in images track by image.id\" ng-class=\"{active : (_activeImg == image)}\" show-image-async=\"{{image.bubbleUrl || image.thumbUrl || image.url}}\" async-kind=\"bubble\" ng-style=\"{\\'width\\' : bubbleSize+\\'px\\', \\'height\\' : bubbleSize+\\'px\\', \\'border-width\\' : bubbleSize/10+\\'px\\', margin: _bubbleMargin}\"></span>'+\n\t\t\t\t\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t// Loading animation overlay container\n\t\t\t\t\t\t\t\t// (show when image is loading)\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-loader\" ng-show=\"imgLoading\">'+\n\t\t\t\t\t\t\t\t\t'<div class=\"spinner\">'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect1\"></div>'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect2\"></div>'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect3\"></div>'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect4\"></div>'+\n\t\t\t\t\t\t\t\t\t\t'<div class=\"rect5\"></div>'+\n\t\t\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t\t'</div>'+\n\n\t\t\t\t\t\t\t\t// (show when image cannot be loaded)\n\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-errorplaceholder\" ng-show=\"imgError\">'+\n\t\t\t\t\t\t\t\t\t'<div class=\"ng-image-gallery-error-placeholder\" ng-bind-html=\"textValues.imageLoadErrorMsg | ngImageGalleryTrust\"></div>' +\n\t\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t\t'</div>'+\n\t\t\t\t\t\t'</div>',\n\n\t\t\tlink : {\n\t\t\t\tpre : function(scope, elem, attr){\n\n\t\t\t\t\t/*\n\t\t\t\t\t *\tOperational functions\n\t\t\t\t\t**/\n\n\t\t\t\t\t// Show gallery loader\n\t\t\t\t\tscope._showLoader = function(){\n\t\t\t\t\t\tscope.imgLoading = true;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Hide gallery loader\n\t\t\t\t\tscope._hideLoader = function(){\n\t\t\t\t\t\tscope.imgLoading = false;\n\t\t\t\t\t}\n\n\t\t\t\t\t// Image load complete promise\n\t\t\t\t\tscope._loadImg = function(imgObj){\n\n\t\t\t\t\t\t// Return rejected promise\n\t\t\t\t\t\t// if not image object received\n\t\t\t\t\t\tif(!imgObj) return $q.reject();\n\n\t\t\t\t\t\tvar deferred =  $q.defer();\n\n\t\t\t\t\t\t// Show loader\n\t\t\t\t\t\tif(!imgObj.hasOwnProperty('cached')) scope._showLoader();\n\n\t\t\t\t\t\t// Process image\n\t\t\t\t\t\tvar img = new Image();\n\t\t\t\t\t\timg.src = imgObj.url;\n\t\t\t\t\t\timg.onload = function(){\n\t\t\t\t\t\t\t// Hide loader\n\t\t\t\t\t\t\tif(!imgObj.hasOwnProperty('cached')) scope._hideLoader();\n\n\t\t\t\t\t\t\t// Cache image\n\t\t\t\t\t\t\tif(!imgObj.hasOwnProperty('cached')) imgObj.cached = true;\n\n\t\t\t\t\t\t\tdeferred.resolve(imgObj);\n\t\t\t\t\t\t}\n\t\t\t\t\t\timg.onerror = function(){\n\t\t\t\t\t\t\tif(!imgObj.hasOwnProperty('cached')) scope._hideLoader();\n\n\t\t\t\t\t\t\tdeferred.reject('Error when loading img');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn deferred.promise;\n\t\t\t\t\t}\n\n\t\t\t\t\tscope._setActiveImg = function(imgObj){\n\t\t\t\t\t\t// Get images move direction\n\t\t\t\t\t\tif(\n\t\t\t\t\t\t\tscope.images.indexOf(scope._activeImg) - scope.images.indexOf(imgObj) == (scope.images.length - 1) ||\n\t\t\t\t\t\t\t(\n\t\t\t\t\t\t\t\tscope.images.indexOf(scope._activeImg) - scope.images.indexOf(imgObj) <= 0 &&\n\t\t\t\t\t\t\t\tscope.images.indexOf(scope._activeImg) - scope.images.indexOf(imgObj) != -(scope.images.length - 1)\n\t\t\t\t\t\t\t)\n\n\t\t\t\t\t\t){\n\t\t\t\t\t\t\tscope._imgMoveDirection = 'forward';\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tscope._imgMoveDirection = 'backward';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Load image\n\t\t\t\t\t\tscope._loadImg(imgObj).then(function(imgObj){\n\t\t\t\t\t\t\tscope._activeImg = imgObj;\n\t\t\t\t\t\t\tscope._activeImageIndex = scope.images.indexOf(imgObj);\n\t\t\t\t\t\t\tscope.imgError = false;\n\t\t\t\t\t\t}, function(){\n\t\t\t\t\t\t\tscope._activeImg = null;\n\t\t\t\t\t\t\tscope._activeImageIndex = scope.images.indexOf(imgObj);\n\t\t\t\t\t\t\tscope.imgError = true;\n\t\t\t\t\t\t})\n\t\t\t\t\t\t;\n\t\t\t\t\t}\n\n\t\t\t\t\tscope._safeApply = function(fn){\n\t\t\t\t\t\tvar phase = this.$root.$$phase;\n\t\t\t\t\t\tif(phase == '$apply' || phase == '$digest'){\n\t\t\t\t\t\t\tif(fn && (typeof(fn) === 'function')){\n\t\t\t\t\t\t\t\tfn();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}else{\n\t\t\t\t\t\t\tthis.$apply(fn);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\tscope._deleteImg = function(img){\n\t\t\t\t\t\tvar _deleteImgCallback = function(){\n\t\t\t\t\t\t\tvar index = scope.images.indexOf(img);\n\t\t\t\t\t\t\tconsole.log(index);\n\t\t\t\t\t\t\tscope.images.splice(index, 1);\n\t\t\t\t\t\t\tscope._activeImageIndex = 0;\n\n\t\t\t\t\t\t\t/**/\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tscope.onDelete({img: img, cb: _deleteImgCallback});\n\t\t\t\t\t}\n\n\t\t\t\t\tscope._editImg = function (img) {\n\t\t\t\t\t    if (!scope.inline) scope.methods.close();\n\n\t\t\t\t\t    scope.onEdit({ img: img });\n\t\t\t\t\t}\n\n\n\t\t\t\t\t/***************************************************/\n\n\n\t\t\t\t\t/*\n\t\t\t\t\t *\tGallery settings\n\t\t\t\t\t**/\n\n\t\t\t\t\t// Modify scope models\n\t\t\t\t\tscope.images \t \t = \t(scope.images \t\t!= undefined) ? scope.images \t : \t[];\n\t\t\t\t\tscope.methods \t \t = \t(scope.methods \t\t!= undefined) ? scope.methods \t : \t{};\n\t\t\t\t\tscope.conf \t \t\t = \t(scope.conf \t\t!= undefined) ? scope.conf \t\t : \t{};\n\n\t\t\t\t\t// setting options\n\t\t\t\t\tscope.$watchCollection('conf', function(conf){\n\t\t\t\t\t\tscope.thumbnails \t = \t(conf.thumbnails \t!= undefined) ? conf.thumbnails \t: \t(scope.thumbnails \t!= undefined) \t?  scope.thumbnails\t\t: \tngImageGalleryOpts.thumbnails;\n\t\t\t\t\t\tscope.thumbSize \t = \t(conf.thumbSize \t!= undefined) ? conf.thumbSize \t\t: \t(scope.thumbSize \t!= undefined) \t?  scope.thumbSize\t\t: \tngImageGalleryOpts.thumbSize;\n\t\t\t\t\t\tscope.thumbLimit \t = \t(conf.thumbLimit \t!= undefined) ? conf.thumbLimit \t\t: \t(scope.thumbLimit\t!= undefined) \t?  scope.thumbLimit\t\t: \tngImageGalleryOpts.thumbLimit;\n\t\t\t\t\t\tscope.inline \t \t = \t(conf.inline \t\t!= undefined) ? conf.inline \t \t: \t(scope.inline \t\t!= undefined) \t?  scope.inline\t\t\t: \tngImageGalleryOpts.inline;\n\t\t\t\t\t\tscope.bubbles \t \t = \t(conf.bubbles \t\t!= undefined) ? conf.bubbles \t \t: \t(scope.bubbles \t\t!= undefined) \t?  scope.bubbles\t\t: \tngImageGalleryOpts.bubbles;\n\t\t\t\t\t\tscope.bubbleSize \t = \t(conf.bubbleSize \t!= undefined) ? conf.bubbleSize \t : \t(scope.bubbleSize \t!= undefined) \t?  scope.bubbleSize\t\t: \tngImageGalleryOpts.bubbleSize;\n\t\t\t\t\t\tscope.imgBubbles \t = \t(conf.imgBubbles \t!= undefined) ? conf.imgBubbles \t: \t(scope.imgBubbles \t!= undefined) \t?  scope.imgBubbles\t\t: \tngImageGalleryOpts.imgBubbles;\n\t\t\t\t\t\tscope.bgClose \t \t = \t(conf.bgClose \t\t!= undefined) ? conf.bgClose \t \t: \t(scope.bgClose \t\t!= undefined) \t?  scope.bgClose\t\t: \tngImageGalleryOpts.bgClose;\n\t\t\t\t\t\tscope.piracy \t \t = \t(conf.piracy \t\t!= undefined) ? conf.piracy \t \t: \t(scope.piracy \t\t!= undefined) \t?  scope.piracy\t\t\t: \tngImageGalleryOpts.piracy;\n\t\t\t\t\t\tscope.imgAnim \t \t = \t(conf.imgAnim \t\t!= undefined) ? conf.imgAnim \t \t: \t(scope.imgAnim \t\t!= undefined) \t?  scope.imgAnim\t\t: \tngImageGalleryOpts.imgAnim;\n                        scope.textValues     =  (conf.textValues    != undefined) ? conf.textValues     :   (scope.textValues   != undefined)   ?  scope.textValues     :   ngImageGalleryOpts.textValues;\n                        scope.defaultImage     =  (conf.defaultImage    != undefined) ? conf.defaultImage     :   (scope.defaultImage   != undefined)   ?  scope.defaultImage     :   ngImageGalleryOpts.defaultImage;\n\t\t\t\t\t\tscope.itemClass \t \t = \t(conf.itemClass \t\t!= undefined) ? conf.itemClass \t \t: \t(scope.itemClass \t\t!= undefined) \t?  scope.itemClass\t\t: \tngImageGalleryOpts.itemClass;\n                        scope.flexiAttributes     =  (conf.flexiAttributes    != undefined) ? conf.flexiAttributes     :   (scope.flexiAttributes   != undefined)   ?  scope.flexiAttributes     :   ngImageGalleryOpts.flexiAttributes;\n\t\t\t\t\t});\n\n\t\t\t\t\tscope.onOpen \t = \t(scope.onOpen \t!= undefined) ? scope.onOpen \t : \tangular.noop;\n\t\t\t\t\tscope.onClose \t = \t(scope.onClose \t!= undefined) ? scope.onClose \t : \tangular.noop;\n\t\t\t\t\tscope.onDelete \t = \t(scope.onDelete != undefined) ? scope.onDelete \t : \tangular.noop;\n\t\t\t\t\tscope.onEdit = (scope.onEdit != undefined) ? scope.onEdit : angular.noop;\n\n\t\t\t\t\t// If images populate dynamically, reset gallery\n\t\t\t\t\tvar imagesFirstWatch = true;\n\t\t\t\t\tscope.$watchCollection('images', function(){\n\t\t\t\t\t\tif(imagesFirstWatch){\n\t\t\t\t\t\t\timagesFirstWatch = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(scope.images.length){\n\t\t\t\t\t\t\tscope._setActiveImg(scope.images[scope._activeImageIndex || 0]);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Watch index of visible/active image\n\t\t\t\t\t// If index changes, make sure to load/change image\n\t\t\t\t\tvar activeImageIndexFirstWatch = true;\n\t\t\t\t\tscope.$watch('_activeImageIndex', function(newImgIndex){\n\t\t\t\t\t\tif(activeImageIndexFirstWatch){\n\t\t\t\t\t\t\tactiveImageIndexFirstWatch = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(scope.images.length){\n\t\t\t\t\t\t\tscope._setActiveImg(\n\t\t\t\t\t\t\t\tscope.images[newImgIndex]\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Open modal automatically if inline\n\t\t\t\t\tscope.$watch('inline', function(){\n\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\tif(scope.inline) scope.methods.open();\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\n\t\t\t\t\t/***************************************************/\n\n\n\t\t\t\t\t/*\n\t\t\t\t\t *\tMethods\n\t\t\t\t\t**/\n\n\t\t\t\t\t// Open gallery modal\n\t\t\t\t\tscope.methods.open = function(imgIndex){\n\t\t\t\t\t\t// Open modal from an index if one passed\n\t\t\t\t\t\tscope._activeImageIndex = (imgIndex) ? imgIndex : 0;\n\n\t\t\t\t\t\tscope.opened = true;\n\n\t\t\t\t\t\t// set overflow hidden to body\n\t\t\t\t\t\tif(!scope.inline) angular.element(document.body).addClass('body-overflow-hidden');\n\n\t\t\t\t\t\t// call open event after transition\n\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\tscope.onOpen();\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Close gallery modal\n\t\t\t\t\tscope.methods.close = function(){\n\t\t\t\t\t\tscope.opened = false; // Model closed\n\n\t\t\t\t\t\t// set overflow hidden to body\n\t\t\t\t\t\tangular.element(document.body).removeClass('body-overflow-hidden');\n\n\t\t\t\t\t\t// call close event after transition\n\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\tscope.onClose();\n\t\t\t\t\t\t\tscope._activeImageIndex = 0; // Reset index\n\t\t\t\t\t\t}, 300);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Change image to next\n\t\t\t\t\tscope.methods.next = function(){\n\t\t\t\t\t\tif(scope._activeImageIndex == (scope.images.length - 1)){\n\t\t\t\t\t\t\tscope._activeImageIndex = 0;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tscope._activeImageIndex = scope._activeImageIndex + 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Change image to prev\n\t\t\t\t\tscope.methods.prev = function(){\n\t\t\t\t\t\tif(scope._activeImageIndex == 0){\n\t\t\t\t\t\t\tscope._activeImageIndex = scope.images.length - 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tscope._activeImageIndex--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\t// Close gallery on background click\n\t\t\t\t\tscope.backgroundClose = function(e){\n\t\t\t\t\t\tif(!scope.bgClose || scope.inline) return;\n\n\t\t\t\t\t\tvar noCloseClasses = [\n\t\t\t\t\t\t\t'galleria-image',\n\t\t\t\t\t\t\t'destroy-icons-container',\n\t\t\t\t\t\t\t'ext-url',\n\t\t\t\t\t\t\t'close',\n\t\t\t\t\t\t\t'next',\n\t\t\t\t\t\t\t'prev',\n\t\t\t\t\t\t\t'galleria-bubble'\n\t\t\t\t\t\t];\n\n\t\t\t\t\t\t// check if clicked element has a class that\n\t\t\t\t\t\t// belongs to `noCloseClasses`\n\t\t\t\t\t\tfor(var i = 0; i < e.target.classList.length; i++){\n\t\t\t\t\t\t\tif(noCloseClasses.indexOf(e.target.classList[i]) != -1){\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tscope.methods.close();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\n\t\t\t\t\t/***************************************************/\n\n\n\t\t\t\t\t/*\n\t\t\t\t\t *\tUser interactions\n\t\t\t\t\t**/\n\n\t\t\t\t\t// Key events\n\t\t\t\t\tangular.element(document).bind('keyup', function(event){\n\t\t\t\t\t\t// If inline modal, do not interact\n\t\t\t\t\t\tif(scope.inline) return;\n\n\t\t\t\t\t\tif(event.which == keys.right || event.which == keys.enter){\n\t\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\t\tscope.methods.next();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(event.which == keys.left){\n\t\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\t\tscope.methods.prev();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(event.which == keys.esc){\n\t\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\t\tscope.methods.close();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// Swipe events\n\t\t\t\t\tif(window.Hammer){\n\t\t\t\t\t\tvar hammerElem = new Hammer(elem[0]);\n\t\t\t\t\t\thammerElem.on('swiperight', function(ev){\n\t\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\t\tscope.methods.prev();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\thammerElem.on('swipeleft', function(ev){\n\t\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\t\tscope.methods.next();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t\thammerElem.on('doubletap', function(ev){\n\t\t\t\t\t\t\tif(scope.inline) return;\n\n\t\t\t\t\t\t\t$timeout(function(){\n\t\t\t\t\t\t\t\tscope.methods.close();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\t\t\t\t\t};\n\n\n\t\t\t\t\t/***********************************************************/\n\n\n\t\t\t\t\t/*\n\t\t\t\t\t *\tActions on angular events\n\t\t\t\t\t**/\n\n\t\t\t\t\tvar removeClassFromDocumentBody = function(){\n\t\t\t\t\t\tangular.element(document.body).removeClass('body-overflow-hidden');\n\t\t\t\t\t};\n\n\t\t\t\t\t$rootScope.$on('$stateChangeSuccess', removeClassFromDocumentBody);\n\t\t\t\t\t$rootScope.$on('$routeChangeSuccess', removeClassFromDocumentBody);\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}]);\n })();\n/**\n * Direktíva zabezpečujúca načítanie obrázka cez xhr aby tento request prešiel rovnakým zabezpečením ako všetky ostatné\n * data-image-url : url obrázka, ktorá by normálne patrila do img src\n * data-default-image : url lokálneho obrázka, ktorý sa použije ako default keď sa hlavný nepodarí natiahnuť\n * [default 'images/no-image.png']\n * data-dafault-image-class : classa, ktorá je priradená elementu default imagu - umožnuje custom styling\n * [default 'default-image']\n */\n(function () {\n\tangular.module('thatisuday.ng-image-gallery')\n\t\t.directive('imageUrl', ['$http', '$q', '$compile',\n\t\t\t\tfunction ($http, $q, $compile) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\trestrict: 'A',\n\t\t\t\t\t\tlink: function (scope, elem, attrs) {\n\t\t\t\t\t\t\tImageUrl($http, $q, $compile, scope, elem, attrs);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t]\n\t\t);\n\n\tfunction ImageUrl($http, $q, $compile, imageScope, imageElement, attrs) {\n\t\t//NOTE: ImageUrl je veľkým lebo sa k tomu viac správam ako k triede než k funkcií\n\t\tvar defaultImage = {\n\t\t\tsrc: 'images/no-image.png',\n\t\t\tcssClass: 'default-image'\n\t\t};\n\n\t\tinitialize();\n\n\t\t/**\n\t\t * Inicializačná funkcia\n\t\t */\n\t\tfunction initialize() {\n\t\t\tif (CommonUtils.isDefined(attrs.defaultImage)) {\n\t\t\t\tdefaultImage.src = attrs.defaultImage;\n\t\t\t}\n\n\t\t\tif (CommonUtils.isDefined(attrs.defaultImageClass)) {\n\t\t\t\tdefaultImage.cssClass = attrs.defaultImageClass;\n\t\t\t}\n\n\t\t\tattrs.$observe('imageUrl', imageUrlObserver);\n\t\t}\n\n\t\t/**\n\t\t * Observer, ktorý sa vyvolá vždy pri zmene adresy obrázka\n\t\t * @param url Nová url obrázka\n\t\t */\n\t\tfunction imageUrlObserver(url) {\n\n\t\t\timageElement.removeClass(\"ng-hide\");\n\t\t\timageElement.parent().find('.' + defaultImage.cssClass).remove();\n\n\t\t\tvar configObject = {\n\t\t\t\tmethod: 'GET',\n\t\t\t\turl: url,\n\t\t\t\tresponseType: 'blob',\n\t\t\t\terrorHandling: {\n\t\t\t\t\tall: replaceWithDefaultImage\n\t\t\t\t},\n\t\t\t\twithCredentials: true\n\t\t\t};\n\n\t\t\t$http(configObject).then(imageLoad, CommonUtils.emptyFunction);\n\t\t}\n\n\t\t/**\n\t\t * Nahradenie obrázku za defaultný ak sa nenašiel obrázok na serveri\n\t\t */\n\t\tfunction replaceWithDefaultImage() {\n\t\t\tvar defaultImageTemplate = '<img src=\"' + defaultImage.src + '\" class=\"' + defaultImage.cssClass + '\">';\n\t\t\tvar defaultImageElement = angular.element(defaultImageTemplate);\n\n\t\t\t//NOTE: používame natvrdo styl na štýlovanie veľkosti obrázkov preto ho kopírujem aj pre default\n\t\t\tdefaultImageElement[0].style.cssText = imageElement[0].style.cssText;\n\t\t\tdefaultImageElement[0].classList = imageElement[0].classList;\n\t\t\timageElement.after($compile(defaultImageElement[0])(imageScope));\n\t\t\timageElement.addClass(\"ng-hide\");\n\t\t}\n\n\t\t/**\n\t\t * Funkcia ktorá sa spustí, keď príde odpoveď zo servera na request obrázku\n\t\t * @param response Odpoveď servera\n\t\t */\n\t\tfunction imageLoad(response) {\n\t\t\tif (response.status === 200) {\n\t\t\t\tvar blob = response.data;\n\t\t\t\tvar imageBlobUrl = URL.createObjectURL(blob);\n\t\t\t\timageElement.attr('src', imageBlobUrl);\n\t\t\t} else {\n\t\t\t\treplaceWithDefaultImage(imageElement, imageScope);\n\t\t\t}\n\t\t}\n\t}\n\n\n})();"]}