!function(){"use strict";var e={enter:13,esc:27,left:37,right:39};angular.module("thatisuday.ng-image-gallery",["ngAnimate"]).provider("ngImageGalleryOpts",function(){var e={thumbnails:!0,thumbSize:80,thumbLimit:!1,inline:!1,bubbles:!0,bubbleSize:20,imgBubbles:!1,bgClose:!1,piracy:!1,imgAnim:"fadeup",textValues:{imageLoadErrorMsg:"Error when loading the image!",deleteButtonTitle:"Delete this image...",editButtonTitle:"Edit this image...",closeButtonTitle:"Close",externalLinkButtonTitle:"Open image in new tab..."},itemClass:"thumb",flexiAttributes:{},defaultImage:"images/no-image.png"};return{setOpts:function(i){angular.extend(e,i)},$get:function(){return e}}}).filter("ngImageGalleryTrust",["$sce",function(e){return function(i,t){return e.trustAs(t||"html",i)}}]).directive("ngGalleryFlexiAttributes",["$parse",function(e){return{restrict:"A",scope:!1,link:function(e,i,t){var n=i.parent().scope().$parent.flexiAttributes;if(n)for(var a in n)i.attr(a.name,a.value)}}}]).directive("ngRightClick",["$parse",function(e){return{restrict:"A",scope:!1,link:function(e,i,t){i.bind("contextmenu",function(i){if(0==e.piracy)return i.preventDefault(),e.piracy})}}}]).directive("ngRightClick",["$parse",function(e){return{restrict:"A",scope:!1,link:function(e,i,t){i.bind("contextmenu",function(i){if(0==e.piracy)return i.preventDefault(),e.piracy})}}}]).directive("showImageAsync",[function(){return{restrict:"A",scope:!1,link:function(e,i,t){var n=new Image;n.src=t.showImageAsync,n.onload=function(){e.$apply(function(){"thumb"==t.asyncKind?(i.css({backgroundImage:'url("'+t.showImageAsync+'")'}),i.empty()):"bubble"==t.asyncKind&&i.css({backgroundImage:'url("'+t.showImageAsync+'")'})})},n.onerror=function(){i.empty()}}}}]).directive("bubbleAutoFit",["$window","$timeout",function(e,i){return{restrict:"A",scope:!1,link:{pre:function(t,n,a){var l=function(){var e=n[0].getBoundingClientRect().width;if(0!=e){var i=t.bubbleSize,a=8,l=i+a,s=e/l,g=Math.floor(s),o=e-g*l,r=o/g,m=a+r,c=m+i;t._bubblesInView=g,t._finalBubbleSpace=c,t._bubbleMargin="0 "+m/2+"px",t._safeApply(angular.noop)}};i(l),angular.element(e).bind("resize",function(){i(l)}),t.$watch("inline",function(){i(l)}),t.$watch("bubbleSize",function(){i(l)}),t.$watchCollection("images",function(){i(l)})}}}}]).directive("bubbleAutoScroll",["$window","$timeout",function(e,i){return{restrict:"A",scope:!1,link:function(t,n,a){var l=function(){var e=t._bubblesInView-(t._bubblesInView-t._activeImageIndex);i(function(){if(e>t._bubblesInView-2){var i=t._activeImageIndex+1-t._bubblesInView+1;t._activeImageIndex!=t.images.length-1?t._bubblesContainerMarginLeft="-"+t._finalBubbleSpace*i+"px":t._bubblesContainerMarginLeft="-"+t._finalBubbleSpace*(i-1)+"px"}else t._bubblesContainerMarginLeft="0px"})};angular.element(e).bind("resize",function(){i(l)}),t.$watch("_bubblesInView",function(){i(l)}),t.$watch("_activeImageIndex",function(){i(l)}),t.$watchCollection("images",function(){i(l)})}}}]).directive("ngImageGallery",["$rootScope","$timeout","$q","ngImageGalleryOpts",function(i,t,n,a){return{replace:!0,transclude:!1,restrict:"AE",scope:{images:"=",methods:"=?",conf:"=?",thumbnails:"=?",thumbSize:"=?",thumbLimit:"=?",inline:"=?",bubbles:"=?",bubbleSize:"=?",imgBubbles:"=?",bgClose:"=?",piracy:"=?",imgAnim:"@?",textValues:"=?",defaultImage:"=?",onOpen:"&?",onClose:"&?",onDelete:"&?",onEdit:"&?",itemClass:"@?",flexiAttributes:"=?"},template:'<div class="ng-image-gallery img-move-dir-{{_imgMoveDirection}}" ng-class="{inline:inline}" ng-hide="images.length == 0"><div ng-if="thumbnails && !inline" class="ng-image-gallery-thumbnails"><div class="{{ itemClass }}" ng-gallery-flexi-attributes ng-repeat="image in images track by image.id" ng-if="thumbLimit ? $index < thumbLimit : true" ng-click="methods.open($index);" data-ng-image-gallery-url="{{image.thumbUrl || image.url}}" title="{{image.title}}" async-kind="thumb" ng-style="{\'width\' : thumbSize+\'px\', \'height\' : thumbSize+\'px\'}"><div class="loader"></div></div></div><div class="ng-image-gallery-modal" ng-if="opened" ng-cloak><div class="ng-image-gallery-backdrop" ng-if="!inline"></div><div class="ng-image-gallery-content" ng-show="!imgLoading" ng-click="backgroundClose($event);"><div class="actions-icons-container"><div class="delete-img" ng-repeat="image in images track by image.id" ng-if="_activeImg == image && image.deletable" title="{{textValues.deleteButtonTitle}}" ng-click="_deleteImg(image)"></div><div class="edit-img" ng-repeat="image in images track by image.id" ng-if="_activeImg == image && image.editable" title="{{textValues.editButtonTitle}}" ng-click="_editImg(image)"></div></div><div class="control-icons-container"><a class="ext-url" ng-repeat="image in images track by image.id" ng-if="_activeImg == image && image.extUrl" href="{{image.extUrl}}" target="_blank" title="{{textValues.externalLinkButtonTitle}}"></a><div class="close" ng-click="methods.close();" ng-if="!inline"  title="{{textValues.closeButtonTitle}}"></div></div><div class="prev" ng-click="methods.prev();" ng-class="{\'bubbles-on\':bubbles}" ng-hide="images.length == 1"></div><div class="next" ng-click="methods.next();" ng-class="{\'bubbles-on\':bubbles}" ng-hide="images.length == 1"></div><div class="galleria"><div class="galleria-images img-anim-{{imgAnim}} img-move-dir-{{_imgMoveDirection}}"><img class="galleria-image" ng-right-click ng-repeat="image in images track by image.id" ng-if="_activeImg == image" data-ng-image-gallery-url="{{image.url}}" data-default-image="{{defaultImage}}" ondragstart="return false;" ng-attr-alt="{{image.alt || undefined}}"/></div><div class="galleria-title-description-wrapper"><div ng-repeat="image in images track by image.id" ng-if="(image.title || image.desc) && (_activeImg == image)"><div class="title" ng-if="image.title" ng-bind-html="image.title | ngImageGalleryTrust"></div><div class="desc" ng-if="image.desc" ng-bind-html="image.desc | ngImageGalleryTrust"></div></div></div><div class="galleria-bubbles-wrapper" ng-if="bubbles && !imgBubbles" ng-hide="images.length == 1" ng-style="{\'height\' : bubbleSize+\'px\'}" bubble-auto-fit><div class="galleria-bubbles" bubble-auto-scroll ng-style="{\'margin-left\': _bubblesContainerMarginLeft}"><span class="galleria-bubble" ng-click="_setActiveImg(image);" ng-repeat="image in images track by image.id" ng-class="{active : (_activeImg == image)}" ng-style="{\'width\' : bubbleSize+\'px\', \'height\' : bubbleSize+\'px\', margin: _bubbleMargin}"></span></div></div><div class="galleria-bubbles-wrapper" ng-if="bubbles && imgBubbles" ng-hide="images.length == 1" ng-style="{\'height\' : bubbleSize+\'px\'}" bubble-auto-fit><div class="galleria-bubbles" bubble-auto-scroll ng-style="{\'margin-left\': _bubblesContainerMarginLeft}"><span class="galleria-bubble img-bubble" ng-click="_setActiveImg(image);" ng-repeat="image in images track by image.id" ng-class="{active : (_activeImg == image)}" ng-image-gallery-url="{{image.bubbleUrl || image.thumbUrl || image.url}}" async-kind="bubble" ng-style="{\'width\' : bubbleSize+\'px\', \'height\' : bubbleSize+\'px\', \'border-width\' : bubbleSize/10+\'px\', margin: _bubbleMargin}"></span></div></div></div></div><div class="ng-image-gallery-loader" ng-show="imgLoading"><div class="spinner"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div></div><div class="ng-image-gallery-errorplaceholder" ng-show="imgError"><div class="ng-image-gallery-error-placeholder" ng-bind-html="textValues.imageLoadErrorMsg | ngImageGalleryTrust"></div></div></div></div>',link:{pre:function(l,s,g){l._showLoader=function(){l.imgLoading=!0},l._hideLoader=function(){l.imgLoading=!1},l._loadImg=function(e){if(!e)return n.reject();var i=n.defer();return e.hasOwnProperty("cached")||l._showLoader(),e.hasOwnProperty("cached")||l._hideLoader(),e.hasOwnProperty("cached")||(e.cached=!0),i.resolve(e),i.promise},l._setActiveImg=function(e){l.images.indexOf(l._activeImg)-l.images.indexOf(e)==l.images.length-1||l.images.indexOf(l._activeImg)-l.images.indexOf(e)<=0&&l.images.indexOf(l._activeImg)-l.images.indexOf(e)!=-(l.images.length-1)?l._imgMoveDirection="forward":l._imgMoveDirection="backward",l._loadImg(e).then(function(e){l._activeImg=e,l._activeImageIndex=l.images.indexOf(e),l.imgError=!1},function(){l._activeImg=null,l._activeImageIndex=l.images.indexOf(e),l.imgError=!0})},l._safeApply=function(e){var i=this.$root.$$phase;"$apply"==i||"$digest"==i?e&&"function"==typeof e&&e():this.$apply(e)},l._deleteImg=function(e){var i=function(){var i=l.images.indexOf(e);console.log(i),l.images.splice(i,1),l._activeImageIndex=0};l.onDelete({img:e,cb:i})},l._editImg=function(e){l.inline||l.methods.close(),l.onEdit({img:e})},l.images=void 0!=l.images?l.images:[],l.methods=void 0!=l.methods?l.methods:{},l.conf=void 0!=l.conf?l.conf:{},l.$watchCollection("conf",function(e){l.thumbnails=void 0!=e.thumbnails?e.thumbnails:void 0!=l.thumbnails?l.thumbnails:a.thumbnails,l.thumbSize=void 0!=e.thumbSize?e.thumbSize:void 0!=l.thumbSize?l.thumbSize:a.thumbSize,l.thumbLimit=void 0!=e.thumbLimit?e.thumbLimit:void 0!=l.thumbLimit?l.thumbLimit:a.thumbLimit,l.inline=void 0!=e.inline?e.inline:void 0!=l.inline?l.inline:a.inline,l.bubbles=void 0!=e.bubbles?e.bubbles:void 0!=l.bubbles?l.bubbles:a.bubbles,l.bubbleSize=void 0!=e.bubbleSize?e.bubbleSize:void 0!=l.bubbleSize?l.bubbleSize:a.bubbleSize,l.imgBubbles=void 0!=e.imgBubbles?e.imgBubbles:void 0!=l.imgBubbles?l.imgBubbles:a.imgBubbles,l.bgClose=void 0!=e.bgClose?e.bgClose:void 0!=l.bgClose?l.bgClose:a.bgClose,l.piracy=void 0!=e.piracy?e.piracy:void 0!=l.piracy?l.piracy:a.piracy,l.imgAnim=void 0!=e.imgAnim?e.imgAnim:void 0!=l.imgAnim?l.imgAnim:a.imgAnim,l.textValues=void 0!=e.textValues?e.textValues:void 0!=l.textValues?l.textValues:a.textValues,l.defaultImage=void 0!=e.defaultImage?e.defaultImage:void 0!=l.defaultImage?l.defaultImage:a.defaultImage,l.itemClass=void 0!=e.itemClass?e.itemClass:void 0!=l.itemClass?l.itemClass:a.itemClass,l.flexiAttributes=void 0!=e.flexiAttributes?e.flexiAttributes:void 0!=l.flexiAttributes?l.flexiAttributes:a.flexiAttributes}),l.onOpen=void 0!=l.onOpen?l.onOpen:angular.noop,l.onClose=void 0!=l.onClose?l.onClose:angular.noop,l.onDelete=void 0!=l.onDelete?l.onDelete:angular.noop,l.onEdit=void 0!=l.onEdit?l.onEdit:angular.noop;var o=!0;l.$watchCollection("images",function(){o?o=!1:l.images.length&&l._setActiveImg(l.images[l._activeImageIndex||0])});var r=!0;if(l.$watch("_activeImageIndex",function(e){r?r=!1:l.images.length&&l._setActiveImg(l.images[e])}),l.$watch("inline",function(){t(function(){l.inline&&l.methods.open()})}),l.methods.open=function(e){l._activeImageIndex=e?e:0,l.opened=!0,l.inline||angular.element(document.body).addClass("body-overflow-hidden"),t(function(){l.onOpen()},300)},l.methods.close=function(){l.opened=!1,angular.element(document.body).removeClass("body-overflow-hidden"),t(function(){l.onClose(),l._activeImageIndex=0},300)},l.methods.next=function(){l._activeImageIndex==l.images.length-1?l._activeImageIndex=0:l._activeImageIndex=l._activeImageIndex+1},l.methods.prev=function(){0==l._activeImageIndex?l._activeImageIndex=l.images.length-1:l._activeImageIndex--},l.backgroundClose=function(e){if(l.bgClose&&!l.inline)for(var i=["galleria-image","destroy-icons-container","ext-url","close","next","prev","galleria-bubble"],t=0;t<e.target.classList.length&&i.indexOf(e.target.classList[t])==-1;t++)l.methods.close()},angular.element(document).bind("keyup",function(i){l.inline||(i.which==e.right||i.which==e.enter?t(function(){l.methods.next()}):i.which==e.left?t(function(){l.methods.prev()}):i.which==e.esc&&t(function(){l.methods.close()}))}),window.Hammer){var m=new Hammer(s[0]);m.on("swiperight",function(e){t(function(){l.methods.prev()})}),m.on("swipeleft",function(e){t(function(){l.methods.next()})}),m.on("doubletap",function(e){l.inline||t(function(){l.methods.close()})})}var c=function(){angular.element(document.body).removeClass("body-overflow-hidden")};i.$on("$stateChangeSuccess",c),i.$on("$routeChangeSuccess",c)}}}}])}(),function(){function e(e,i,t,n,a,l){function s(){CommonUtils.isDefined(l.defaultImage)&&(m.src=l.defaultImage),CommonUtils.isDefined(l.defaultImageClass)&&(m.cssClass=l.defaultImageClass),l.$observe("ngImageGalleryUrl",g)}function g(i){a.removeClass("ng-hide"),a.parent().find("."+m.cssClass).remove();var t={method:"GET",url:i,responseType:"blob",errorHandling:{all:o},withCredentials:!0};e(t).then(r,CommonUtils.emptyFunction)}function o(){var e='<img src="'+m.src+'" class="'+m.cssClass+'">',i=angular.element(e);i[0].style.cssText=a[0].style.cssText,i[0].classList=a[0].classList,a.after(t(i[0])(n)),a.addClass("ng-hide")}function r(e){if(200===e.status){var i=e.data,t=URL.createObjectURL(i);"DIV"===a[0].nodeName?(a.css({backgroundImage:'url("'+t+'")'}),a.empty()):a.attr("src",t)}else o(a,n)}var m={src:"images/no-image.png",cssClass:"default-image"};s()}angular.module("thatisuday.ng-image-gallery").directive("ngImageGalleryUrl",["$http","$q","$compile",function(i,t,n){return{restrict:"A",link:function(a,l,s){e(i,t,n,a,l,s)}}}])}();
//# sourceMappingURL=ng-image-gallery.min.js.map
