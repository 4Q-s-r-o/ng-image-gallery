!function(){"use strict";function t(n,e){if(n.parentNode){if(n.parentNode.className){var i=n.parentNode.className.split(" ");return!!i.includes(e)||t(n.parentNode,e)}return t(n.parentNode,e)}return!1}var n={enter:13,esc:27,left:37,right:39};angular.module("thatisuday.modal",[]).provider("ngModalOps",function(){var t={closable:!0,compactClose:!0,fullscreen:!1,closeIcon:"_cross_icon",width:"700px",height:"400px",padding:"20px 30px",borderRadius:"3px",top:"50%",left:"50%",backdrop:"rgba(0,0,0,0.75)",background:"#fff",zIndex:"9999",animation:!0,animDropIn:"fadeIn",animDropOut:"fadeOut",animBodyIn:"zoomIn",animBodyOut:"fadeOut",animDuration:300,prevIcon:"_prev_icon",nextIcon:"_next_icon",thumbs:!0,thumbsLength:5,animImage:"fadeIn"};return{setOptions:function(n){angular.extend(t,n)},$get:function(){return t}}}).directive("ngModal",["$timeout","$q","$document","$window","$sce","ngModalOps",function(e,i,a,s,o,r){return{restrict:"AE",transclude:!0,template:'\t\t\t\t<div class="ngModal animated" ng-class="{_active:states.isOpened, _hidden:states.isClosed}">\t\t\t\t\t<div class="_close" ng-click="controls.close();"></div>\t\t\t\t</div>\t\t\t',replace:!0,scope:{video:"@?",options:"=?",controls:"=?",callbacks:"=?",gallery:"=?",onOpen:"&?",onClose:"&?"},compile:function(l,c){return c.gallery?l.append('\t\t\t\t\t\t<div class="_body _gallery animated">\t\t\t\t\t\t\t<img ng-if="imageLoaded" ng-src="{{currentImg}}" class="animated" ng-class="{\'{{initOps.animImage}}\':imageAnimted, _hidden:!imageAnimted}" />\t\t\t\t\t\t\t<div ng-if="!imageLoaded" class="_spinner"></div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div ng-if="initOps.thumbs" class="_thumbnails_conatainer" style="width:{{initOps.thumbsLength*40}}px;">\t\t\t\t\t\t\t<div class="_thumbnails" style="margin-left:{{thumbScroll}}px;">\t\t\t\t\t\t\t\t<div ng-repeat="img in gallery" ng-class="{current:($index == currImgIndex)}" ng-click="showImage($index);" style="background-image:url({{img.thumbURL || img.imgURL}});"></div>\t\t\t\t\t\t\t</div>\t\t\t\t\t\t</div>\t\t\t\t\t\t<div class="_prev {{initOps.prevIcon}}" ng-click="prevImage();"></div>\t\t\t\t\t\t<div class="_next {{initOps.nextIcon}}" ng-click="nextImage();"></div>\t\t\t\t\t'):c.video?l.append('<div class="_body _video animated"><iframe ng-src="{{videoURL}}"></iframe></div>'):l.append('<div class="_body animated" ng-transclude></div>'),function(l,c,d){var p,g=c,m=(g[0],g[0].querySelector("._body")),u=angular.element(m),h=g[0].querySelector("._close"),f=angular.element(h),O=function(){return{windowWidth:window.innerWidth,windowHeight:window.innerHeight,mBodyWidth:m.offsetWidth,mBodyHeight:m.offsetHeight}},I=function(){var t=O();t.mBodyWidth<t.windowWidth||t.mBodyHeight<t.windowHeight?u.css({left:"50%","margin-left":"-"+t.mBodyWidth/2+"px",top:"50%","margin-top":"-"+t.mBodyHeight/2+"px"}):u.css({left:"0","margin-left":"0",top:"0","margin-top":"0"})},v=function(){var t=O();(t.mBodyWidth<t.windowWidth||t.mBodyHeight<t.windowWidth)&&f.css({right:(t.windowWidth-t.mBodyWidth)/2-25+"px",top:(t.windowHeight-t.mBodyHeight)/2-30+"px"})};if(l.loadImage=function(t){if(p&&p.reject(),p=i.defer(),l.states.imgLoading=!0,l.imageAnimted=!1,l.gallery[t].cached&&l.gallery[t].cached===!0)return p.resolve(t),p.promise;var n=new Image;return n.src=l.gallery[t].imgURL,n.onload=function(){l.gallery[t].cached=!0,p.resolve(t)},l.imageLoaded=!1,p.promise},l.showImage=function(t){var n=i.defer();return l.currImgIndex=t||0,l.loadImage(l.currImgIndex).then(function(t){l.currentImg=l.gallery[t].imgURL,e(function(){n.resolve(),l.states.imgLoading=!1,l.imageLoaded=!0,e(function(){l.imageAnimted=!0},10),l.thumbScroll=l.thumbScroll||0,l.gallery.length>l.initOps.thumbsLength&&(l.currImgIndex+2>l.initOps.thumbsLength?l.currImgIndex+1==l.gallery.length?l.thumbScroll=-40*(l.currImgIndex+1-l.initOps.thumbsLength):l.thumbScroll=-40*(l.currImgIndex+2-l.initOps.thumbsLength):l.currImgIndex<l.initOps.thumbsLength&&(l.thumbScroll=0))}),l.$$phase||l.$root.$$phase||l.$apply()}),n.promise},l.prevImage=function(){l.currImgIndex=0==l.currImgIndex?l.gallery.length-1:l.currImgIndex-1,l.showImage(l.currImgIndex).then(function(){e(function(){l.callbacks.onPrevDone&&l.callbacks.onPrevDone()})}),e(function(){l.callbacks.onPrev&&l.callbacks.onPrev()})},l.nextImage=function(){l.currImgIndex=l.currImgIndex==l.gallery.length-1?0:l.currImgIndex+1,l.showImage(l.currImgIndex).then(function(){e(function(){l.callbacks.onNextDone&&l.callbacks.onNextDone()})}),e(function(){l.callbacks.onNext&&l.callbacks.onNext()})},l.states={isTouched:!1,isOpened:!1,isClosed:!0,imgLoading:!1},l.$watchCollection("states",function(t){l.states.isClosed=!t.isOpened}),l.initOps=angular.extend({},r,l.options),d.gallery&&l.gallery?(l.initOps.closable=!1,l.initOps.compactClose=!1):l.initOps.fullscreen&&(l.initOps.compactClose=!1),l.initOps.closable&&(g.css({cursor:"pointer"}),g.bind("click",function(t){t.target==m||m.contains(t.target)||l.controls.close()})),l.initOps.closeIcon&&f.addClass(l.initOps.closeIcon),l.initOps.animation&&l.initOps.animDuration){var b=l.initOps.animDuration/1e3+"s";g.css({"-webkit-animation-duration":b,"animation-duration":b}),u.css({"-webkit-animation-duration":b,"animation-duration":b})}else l.initOps.animDuration=0;if(g.css({"background-color":l.initOps.backdrop,"z-index":l.initOps.zIndex}),u.css({"background-color":l.initOps.background,width:l.initOps.width,height:l.initOps.height,padding:l.initOps.padding,"border-radius":l.initOps.borderRadius,top:l.initOps.top,left:l.initOps.left}),l.initOps.fullscreen&&(u.css({width:"100%","min-height":"100%",height:"auto",top:"0",left:"0","border-radius":"0px"}),f.css({color:"#333"})),l.initOps.flat&&g.addClass("_flat _"+l.initOps.flat),d.gallery&&l.gallery){var x=O();u.css({"background-color":"transparent",width:"calc(100% - 100px)",height:"calc(100% - 100px)"}),l.showImage()}if(d.video&&l.video){var x=O();l.videoURL=o.trustAsResourceUrl(l.video),u.css({height:x.mBodyWidth/100*56.25+"px","border-radius":"0px",padding:"0px"})}l.controls=l.controls||{},l.callbacks=l.callbacks||{},l.controls.open=function(){l.states.isOpened||(l.states.isOpened=!0,l.states.isTouched=!0,a.find("body").addClass("ngModalVisible"),l.initOps.animation&&(g.removeClass(l.initOps.animDropOut).addClass(l.initOps.animDropIn),u.removeClass(l.initOps.animBodyOut).addClass(l.initOps.animBodyIn)),e(function(){l.initOps.fullscreen||I(),l.initOps.compactClose&&v()}),e(function(){l.onOpen&&l.onOpen(),l.callbacks.onOpen&&l.callbacks.onOpen()},l.initOps.animDuration),l.$$phase||l.$root.$$phase||l.$apply())},l.controls.close=function(){l.states.isOpened&&(l.initOps.animation&&(g.removeClass(l.initOps.animDropIn).addClass(l.initOps.animDropOut),u.removeClass(l.initOps.animBodyIn).addClass(l.initOps.animBodyOut)),e(function(){l.states.isOpened=!1,l.onClose&&l.onClose(),l.callbacks.onClose&&l.callbacks.onClose(),e(function(){0===document.getElementsByClassName("ngModal _active").length&&a.find("body").removeClass("ngModalVisible")})},l.initOps.animDuration),l.$$phase||l.$root.$$phase||l.$apply())},l.controls.getStates=function(){return l.states},l.controls.nextImage=function(){l.nextImage()},l.controls.prevImage=function(){l.prevImage()},l.controls.showImage=function(t){t<l.gallery.length&&l.showImage(t),l.$$phase||l.$root.$$phase||l.$apply()},a.bind("keyup",function(t){l.states.isOpened&&(t.which===n.esc?l.controls.close():t.which===n.left?l.prevImage():t.which===n.right&&l.nextImage())}),angular.element(s).bind("resize",function(){l.states.isOpened&&(l.initOps.fullscreen||I(),l.initOps.compactClose&&v())}),e(function(){t(g[0],"ngModal")&&g.css({position:"absolute"})})}}}}])}();
//# sourceMappingURL=dist/main.min.js.map
